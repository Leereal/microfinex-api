{
  "info": {
    "name": "Microfinex API v1 - Smart Collection",
    "description": "Modern Microfinance Management System API with automatic variable population and JWT token handling. This collection automatically extracts and stores IDs, tokens, and other data from responses for seamless API testing.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_postman_id": "microfinex-api-v1",
    "version": {
      "major": 1,
      "minor": 0,
      "patch": 0
    }
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000/api/v1",
      "description": "Base URL for the API"
    },
    {
      "key": "authToken",
      "value": "",
      "description": "JWT access token (auto-populated from login)"
    },
    {
      "key": "refreshToken",
      "value": "",
      "description": "JWT refresh token (auto-populated from login)"
    },
    {
      "key": "userId",
      "value": "",
      "description": "Current user ID (auto-populated from login)"
    },
    {
      "key": "organizationId",
      "value": "",
      "description": "Current organization ID (auto-populated from login)"
    },
    {
      "key": "clientId",
      "value": "",
      "description": "Last created/retrieved client ID"
    },
    {
      "key": "loanId",
      "value": "",
      "description": "Last created/retrieved loan ID"
    },
    {
      "key": "paymentId",
      "value": "",
      "description": "Last created/retrieved payment ID"
    },
    {
      "key": "groupId",
      "value": "",
      "description": "Last created/retrieved group ID"
    },
    {
      "key": "employerId",
      "value": "",
      "description": "Last created/retrieved employer ID"
    },
    {
      "key": "shopId",
      "value": "",
      "description": "Last created/retrieved shop ID"
    },
    {
      "key": "shopProductId",
      "value": "",
      "description": "Last created/retrieved shop product ID"
    },
    {
      "key": "loanItemId",
      "value": "",
      "description": "Last created/retrieved loan item ID"
    },
    {
      "key": "applicationId",
      "value": "",
      "description": "Last created/retrieved online application ID"
    },
    {
      "key": "visitId",
      "value": "",
      "description": "Last created/retrieved visit ID"
    },
    {
      "key": "pledgeId",
      "value": "",
      "description": "Last created/retrieved pledge ID"
    },
    {
      "key": "branchId",
      "value": "",
      "description": "Current branch ID"
    },
    {
      "key": "pendingOrganizationId",
      "value": "",
      "description": "ID of pending organization for approval/rejection"
    },
    {
      "key": "productId",
      "value": "",
      "description": "Loan product ID"
    },
    {
      "key": "categoryId",
      "value": "",
      "description": "Loan category ID"
    },
    {
      "key": "targetUserId",
      "value": "",
      "description": "Target user ID for user management operations"
    },
    {
      "key": "roleId",
      "value": "",
      "description": "Last created/retrieved role ID for RBAC operations"
    },
    {
      "key": "auditLogId",
      "value": "",
      "description": "Last retrieved audit log ID"
    },
    {
      "key": "assessmentId",
      "value": "",
      "description": "Last created/retrieved loan assessment ID"
    },
    {
      "key": "verificationCode",
      "value": "",
      "description": "OTP verification code for online applications (dev mode only)"
    },
    {
      "key": "encryptionKeyId",
      "value": "",
      "description": "Last created/retrieved encryption key ID"
    },
    {
      "key": "paymentMethodId",
      "value": "",
      "description": "Last created/retrieved payment method ID"
    },
    {
      "key": "incomeCategoryId",
      "value": "",
      "description": "Last created/retrieved income category ID"
    },
    {
      "key": "expenseCategoryId",
      "value": "",
      "description": "Last created/retrieved expense category ID"
    },
    {
      "key": "financialTransactionId",
      "value": "",
      "description": "Last created/retrieved financial transaction ID"
    },
    {
      "key": "noteId",
      "value": "",
      "description": "Last created/retrieved note ID"
    },
    {
      "key": "aiConfigId",
      "value": "",
      "description": "Last created/retrieved AI configuration ID"
    },
    {
      "key": "collateralId",
      "value": "",
      "description": "Last created/retrieved collateral ID"
    },
    {
      "key": "collateralTypeId",
      "value": "",
      "description": "Last created/retrieved collateral type ID"
    },
    {
      "key": "loanPurposeId",
      "value": "",
      "description": "Last created/retrieved loan purpose ID"
    },
    {
      "key": "chargeId",
      "value": "",
      "description": "Last created/retrieved charge ID"
    },
    {
      "key": "currencyId",
      "value": "",
      "description": "Last created/retrieved currency ID"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global pre-request script with enhanced token management",
          "console.log('üöÄ Making request to: ' + pm.request.url);",
          "",
          "// Auto-check and warn about missing auth token",
          "const authToken = pm.collectionVariables.get('authToken');",
          "const requestUrl = pm.request.url.toString();",
          "const isAuthEndpoint = requestUrl.includes('/auth/') || requestUrl.includes('/health');",
          "",
          "if (!authToken && !isAuthEndpoint) {",
          "    console.log('‚ö†Ô∏è No auth token found. Please login first using the Login request.');",
          "    console.log('üí° Tip: The Login request will automatically populate the authToken variable.');",
          "}",
          "",
          "// Add request timestamp",
          "const timestamp = new Date().toISOString();",
          "console.log('‚è∞ Request timestamp: ' + timestamp);",
          "",
          "// Auto-refresh token if it's about to expire (optional feature)",
          "if (authToken) {",
          "    try {",
          "        const tokenPayload = JSON.parse(atob(authToken.split('.')[1]));",
          "        const expirationTime = tokenPayload.exp * 1000;",
          "        const currentTime = Date.now();",
          "        const timeUntilExpiry = expirationTime - currentTime;",
          "        ",
          "        if (timeUntilExpiry < 300000) { // Less than 5 minutes",
          "            console.log('‚ö†Ô∏è Token expires in less than 5 minutes. Consider refreshing.');",
          "        }",
          "    } catch (e) {",
          "        // Ignore token parsing errors",
          "    }",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script with enhanced logging",
          "const responseTime = pm.response.responseTime;",
          "console.log('‚è±Ô∏è Response time: ' + responseTime + 'ms');",
          "",
          "// Enhanced error handling and logging",
          "if (pm.response.code >= 400) {",
          "    console.log('‚ùå Error response (' + pm.response.code + '):');",
          "    try {",
          "        const errorBody = pm.response.json();",
          "        console.log('   Message: ' + (errorBody.message || 'Unknown error'));",
          "        console.log('   Error: ' + (errorBody.error || 'No error code'));",
          "        ",
          "        // Special handling for auth errors",
          "        if (pm.response.code === 401) {",
          "            console.log('üîê Authentication required. Please login first.');",
          "        }",
          "    } catch (e) {",
          "        console.log('   Raw response: ' + pm.response.text());",
          "    }",
          "} else {",
          "    console.log('‚úÖ Request successful (' + pm.response.code + ')');",
          "    ",
          "    // Log response data for successful requests",
          "    try {",
          "        const responseBody = pm.response.json();",
          "        if (responseBody.message) {",
          "            console.log('üìù Response: ' + responseBody.message);",
          "        }",
          "    } catch (e) {",
          "        // Ignore JSON parsing errors",
          "    }",
          "}"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "üîê Authentication",
      "description": "Authentication endpoints with automatic token management",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Enhanced login response handler with automatic token population",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    try {",
                  "        const response = pm.response.json();",
                  "        ",
                  "        if (response.success && response.data) {",
                  "            // üîë AUTOMATIC TOKEN POPULATION",
                  "            if (response.data.token) {",
                  "                pm.collectionVariables.set('authToken', response.data.token);",
                  "                console.log('üîê ‚úÖ Auth token automatically updated!');",
                  "                console.log('üîê üìã Token length: ' + response.data.token.length + ' characters');",
                  "                ",
                  "                // Decode and show token info",
                  "                try {",
                  "                    const tokenPayload = JSON.parse(atob(response.data.token.split('.')[1]));",
                  "                    const expirationDate = new Date(tokenPayload.exp * 1000);",
                  "                    console.log('üîê ‚è∞ Token expires: ' + expirationDate.toLocaleString());",
                  "                    console.log('üîê üë§ Token user: ' + tokenPayload.email);",
                  "                } catch (e) {",
                  "                    console.log('üîê ‚ö†Ô∏è Could not decode token payload');",
                  "                }",
                  "            }",
                  "            ",
                  "            // Handle legacy token format (tokens.access)",
                  "            if (response.data.tokens && response.data.tokens.access) {",
                  "                pm.collectionVariables.set('authToken', response.data.tokens.access);",
                  "                pm.collectionVariables.set('refreshToken', response.data.tokens.refresh);",
                  "                console.log('üîê ‚úÖ Auth tokens updated (legacy format)');",
                  "            }",
                  "            ",
                  "            // Set user information",
                  "            if (response.data.user) {",
                  "                pm.collectionVariables.set('userId', response.data.user.id);",
                  "                if (response.data.user.organization && response.data.user.organization.id) {",
                  "                    pm.collectionVariables.set('organizationId', response.data.user.organization.id);",
                  "                    console.log('üè¢ Organization ID set: ' + response.data.user.organization.id);",
                  "                } else {",
                  "                    // Super admin case (organizationId is null)",
                  "                    pm.collectionVariables.set('organizationId', '');",
                  "                    console.log('üëë Super Admin detected - no organization restriction');",
                  "                }",
                  "                console.log('üë§ User info updated: ' + response.data.user.firstName + ' ' + response.data.user.lastName);",
                  "                console.log('üé≠ User role: ' + response.data.user.role);",
                  "            }",
                  "            ",
                  "            // Success notification",
                  "            console.log('');",
                  "            console.log('üéâ LOGIN SUCCESSFUL!');",
                  "            console.log('‚ú® All subsequent requests will now use the auth token automatically.');",
                  "            console.log('üöÄ You can now use any protected endpoint without manually setting tokens.');",
                  "            console.log('');",
                  "            ",
                  "        } else {",
                  "            console.log('‚ö†Ô∏è Login response missing expected data structure');",
                  "        }",
                  "    } catch (error) {",
                  "        console.log('‚ùå Error processing login response: ' + error.message);",
                  "    }",
                  "}",
                  "",
                  "pm.test('Response has success true', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "pm.test('Response contains user data', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "    pm.expect(jsonData.data).to.have.property('token');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"leereal08@ymail.com\",\n  \"password\": \"Mutabvuri$8\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "üîê **AUTOMATIC TOKEN MANAGEMENT**\\n\\nThis request automatically handles all authentication for you:\\n\\n**What it does:**\\n‚úÖ Logs you into the system\\n‚úÖ Automatically populates the `authToken` variable\\n‚úÖ Sets user ID and organization ID\\n‚úÖ Enables all subsequent requests to work without manual token setup\\n\\n**How to use:**\\n1. Click Send\\n2. That's it! All other requests will now work automatically\\n\\n**Token Features:**\\n- Auto-population of JWT token\\n- Token expiration tracking\\n- User role and organization detection\\n- Super Admin detection\\n\\n**Default Credentials:**\\n- Email: leereal08@ymail.com\\n- Password: Mutabvuri$8\\n- Role: SUPER_ADMIN"
          }
        },
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Auto-populate user info from registration response",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    ",
                  "    if (response.success && response.data) {",
                  "        // Set user information",
                  "        if (response.data.user) {",
                  "            pm.collectionVariables.set('userId', response.data.user.id);",
                  "            pm.collectionVariables.set('organizationId', response.data.user.organizationId);",
                  "            console.log('‚úÖ New user info updated');",
                  "        }",
                  "        ",
                  "        // Set tokens if provided",
                  "        if (response.data.tokens) {",
                  "            pm.collectionVariables.set('authToken', response.data.tokens.access);",
                  "            pm.collectionVariables.set('refreshToken', response.data.tokens.refresh);",
                  "            console.log('‚úÖ Auth tokens updated from registration');",
                  "        }",
                  "    }",
                  "}",
                  "",
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('User created successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@microfinex.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"role\": \"STAFF\",\n  \"organizationId\": \"{{organizationId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Register a new user. Automatically populates user variables and tokens if returned."
          }
        },
        {
          "name": "Register Organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Handle organization registration response",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    ",
                  "    if (response.success && response.data) {",
                  "        // Set organization info for reference",
                  "        if (response.data.organization) {",
                  "            pm.collectionVariables.set('pendingOrganizationId', response.data.organization.id);",
                  "            console.log('‚úÖ Organization registration submitted');",
                  "            console.log('üè¢ Organization: ' + response.data.organization.name);",
                  "            console.log('üìã Status: ' + response.data.organization.status);",
                  "            console.log('üìß Pending approval notification will be sent to: ' + response.data.organization.email);",
                  "        }",
                  "        ",
                  "        if (response.data.user) {",
                  "            console.log('üë§ Admin user created: ' + response.data.user.email);",
                  "            console.log('‚è≥ User account is pending organization approval');",
                  "        }",
                  "    }",
                  "}",
                  "",
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Organization registration submitted', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('organization');",
                  "    pm.expect(jsonData.data).to.have.property('user');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"organization\": {\n    \"name\": \"Test Microfinance Ltd\",\n    \"type\": \"MICROFINANCE\",\n    \"email\": \"contact@testmfi.com\",\n    \"phone\": \"+1234567890\",\n    \"address\": \"123 Finance Street, Business District\",\n    \"registrationNumber\": \"REG-2024-001\",\n    \"licenseNumber\": \"LIC-MFI-001\",\n    \"website\": \"https://testmfi.com\"\n  },\n  \"admin\": {\n    \"firstName\": \"John\",\n    \"lastName\": \"Admin\",\n    \"email\": \"john.admin@testmfi.com\",\n    \"phone\": \"+1234567891\",\n    \"password\": \"SecurePass@123\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register-organization",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register-organization"]
            },
            "description": "üè¢ **ORGANIZATION REGISTRATION**\\n\\nRegister a new organization with its first admin user. The organization will be created with pending status and requires SUPER_ADMIN approval.\\n\\n**What it does:**\\n‚úÖ Creates a new organization (inactive/pending)\\n‚úÖ Creates the first admin user (inactive)\\n‚úÖ Both will be activated upon approval\\n\\n**Organization Fields:**\\n- name: Organization name (required, unique)\\n- type: MICROFINANCE, SACCO, BANK, CREDIT_UNION, FINTECH, OTHER\\n- email: Organization email (required, unique)\\n- phone: Contact phone\\n- address: Physical address\\n- registrationNumber: Business registration number\\n- licenseNumber: Operating license number\\n- website: Organization website\\n\\n**Admin User Fields:**\\n- firstName, lastName: Admin name (required)\\n- email: Admin email (required, unique)\\n- phone: Admin phone\\n- password: Secure password (min 8 chars, 1 uppercase, 1 number, 1 special char)\\n\\n**After Registration:**\\n- Organization status: PENDING_APPROVAL\\n- Admin role: STAFF (promoted to ORG_ADMIN upon approval)\\n- Both accounts inactive until approval"
          }
        },
        {
          "name": "Get Pending Organizations",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Pending organizations retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('organizations');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.organizations) {",
                  "        const orgs = response.data.organizations;",
                  "        console.log('üìã Pending organizations: ' + orgs.length);",
                  "        orgs.forEach((org, index) => {",
                  "            console.log('');",
                  "            console.log('üè¢ ' + (index + 1) + '. ' + org.name);",
                  "            console.log('   üìß Email: ' + org.email);",
                  "            console.log('   üìÖ Registered: ' + new Date(org.createdAt).toLocaleDateString());",
                  "            if (org.pendingAdmin) {",
                  "                console.log('   üë§ Admin: ' + org.pendingAdmin.firstName + ' ' + org.pendingAdmin.lastName);",
                  "            }",
                  "        });",
                  "        ",
                  "        // Store first pending org ID for approval/rejection",
                  "        if (orgs.length > 0) {",
                  "            pm.collectionVariables.set('pendingOrganizationId', orgs[0].id);",
                  "            console.log('');",
                  "            console.log('üìå First pending org ID set to pendingOrganizationId variable');",
                  "        }",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/organizations/pending",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "organizations", "pending"]
            },
            "description": "üìã **GET PENDING ORGANIZATIONS** (SUPER_ADMIN only)\\n\\nRetrieve all organizations that are pending approval.\\n\\n**Response includes:**\\n- Organization details (name, email, type, etc.)\\n- Pending admin user information\\n- Registration date\\n- User count\\n\\n**Auto-population:**\\n- First pending org ID is set to `pendingOrganizationId` variable"
          }
        },
        {
          "name": "Approve Organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Organization approved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('‚úÖ Organization approved successfully!');",
                  "        if (response.data.organization) {",
                  "            console.log('üè¢ Organization: ' + response.data.organization.name);",
                  "            console.log('üìß Email: ' + response.data.organization.email);",
                  "            console.log('üîì Status: Active');",
                  "        }",
                  "        if (response.data.admin) {",
                  "            console.log('üë§ Admin promoted: ' + response.data.admin.email);",
                  "            console.log('üé≠ New role: ' + response.data.admin.role);",
                  "        }",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/organizations/{{pendingOrganizationId}}/approve",
              "host": ["{{baseUrl}}"],
              "path": [
                "auth",
                "organizations",
                "{{pendingOrganizationId}}",
                "approve"
              ]
            },
            "description": "‚úÖ **APPROVE ORGANIZATION** (SUPER_ADMIN only)\\n\\nApprove a pending organization registration.\\n\\n**What it does:**\\n‚úÖ Activates the organization (isActive = true)\\n‚úÖ Promotes the first user to ORG_ADMIN role\\n‚úÖ Activates the admin user account\\n‚úÖ Enables the organization to start operations\\n\\n**Prerequisites:**\\n- Must be logged in as SUPER_ADMIN\\n- Organization must be in pending state\\n- Use `pendingOrganizationId` variable or replace with actual ID"
          }
        },
        {
          "name": "Reject Organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Organization rejected', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚ùå Organization registration rejected');",
                  "    if (response.data && response.data.reason) {",
                  "        console.log('üìù Reason: ' + response.data.reason);",
                  "    }",
                  "    // Clear the pending org ID",
                  "    pm.collectionVariables.set('pendingOrganizationId', '');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Incomplete documentation provided\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/organizations/{{pendingOrganizationId}}/reject",
              "host": ["{{baseUrl}}"],
              "path": [
                "auth",
                "organizations",
                "{{pendingOrganizationId}}",
                "reject"
              ]
            },
            "description": "‚ùå **REJECT ORGANIZATION** (SUPER_ADMIN only)\\n\\nReject a pending organization registration.\\n\\n**What it does:**\\n‚ùå Deletes the organization record\\n‚ùå Deletes associated admin user from auth and database\\n‚ùå Permanently removes all registration data\\n\\n**Request Body:**\\n- reason: Optional rejection reason (will be logged)\\n\\n**Prerequisites:**\\n- Must be logged in as SUPER_ADMIN\\n- Organization must be in pending state\\n- Cannot reject an already active organization"
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Auto-update tokens from refresh response",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    ",
                  "    if (response.success && response.data) {",
                  "        if (response.data.tokens) {",
                  "            pm.collectionVariables.set('authToken', response.data.tokens.access);",
                  "            pm.collectionVariables.set('refreshToken', response.data.tokens.refresh);",
                  "            console.log('‚úÖ Tokens refreshed successfully');",
                  "        }",
                  "    }",
                  "}",
                  "",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Tokens refreshed', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            },
            "description": "Refresh JWT tokens using the refresh token. Automatically updates both access and refresh tokens."
          }
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Clear tokens on successful logout",
                  "if (pm.response.code === 200) {",
                  "    console.log('üîê Logging out - clearing all tokens...');",
                  "    pm.collectionVariables.set('authToken', '');",
                  "    pm.collectionVariables.set('refreshToken', '');",
                  "    pm.collectionVariables.set('userId', '');",
                  "    pm.collectionVariables.set('organizationId', '');",
                  "    console.log('‚úÖ All authentication tokens cleared');",
                  "    console.log('‚ÑπÔ∏è You will need to login again to access protected endpoints');",
                  "}",
                  "",
                  "pm.test('Logout successful', function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            },
            "description": "Logout and clear all authentication tokens. You'll need to login again after this."
          }
        },
        {
          "name": "Change Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Password changed successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    console.log('‚úÖ Password changed successfully');",
                  "    console.log('‚ÑπÔ∏è Use your new password for future logins');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"currentPassword\": \"YourCurrentPassword\",\n  \"newPassword\": \"YourNewSecurePassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/change-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "change-password"]
            },
            "description": "Change your own password. Requires current password for verification."
          }
        },
        {
          "name": "Generate API Key",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('API key generated', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.apiKey) {",
                  "        console.log('‚úÖ API Key generated successfully');",
                  "        console.log('üîë API Key: ' + response.data.apiKey);",
                  "        console.log('‚ö†Ô∏è Store this key securely - it will not be shown again!');",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"My API Key\",\n  \"expiresInDays\": 365\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/api-key",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "api-key"]
            },
            "description": "Generate an API key for programmatic access (Admin only). Store the key securely as it will not be shown again."
          }
        }
      ]
    },
    {
      "name": "üè¢ Organizations",
      "description": "Organization management endpoints with automatic ID population",
      "item": [
        {
          "name": "Create Organization (Super Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Auto-populate organization ID from creation response",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    ",
                  "    if (response.success && response.data && response.data.organization) {",
                  "        pm.collectionVariables.set('organizationId', response.data.organization.id);",
                  "        console.log('‚úÖ Organization ID updated: ' + response.data.organization.id);",
                  "        console.log('üè¢ Organization created: ' + response.data.organization.name);",
                  "        console.log('üìä Type: ' + response.data.organization.type);",
                  "    }",
                  "}",
                  "",
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Organization created successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data.organization).to.have.property('id');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Acme Microfinance\",\n  \"type\": \"MICROFINANCE\",\n  \"address\": \"123 Business District, City, Country\",\n  \"phone\": \"+1234567890\",\n  \"email\": \"info@acmemicrofinance.com\",\n  \"website\": \"https://acmemicrofinance.com\",\n  \"registrationNumber\": \"REG123456\",\n  \"licenseNumber\": \"LIC789012\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/organizations",
              "host": ["{{baseUrl}}"],
              "path": ["organizations"]
            },
            "description": "Create a new organization (Super Admin only). Automatically populates organizationId variable."
          }
        },
        {
          "name": "List Organizations",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Organizations retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "// Auto-populate first organization ID if available",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.organizations && response.data.organizations.length > 0) {",
                  "        const firstOrg = response.data.organizations[0];",
                  "        pm.collectionVariables.set('organizationId', firstOrg.id);",
                  "        console.log('‚úÖ First organization ID set: ' + firstOrg.id);",
                  "        console.log('üè¢ Organization: ' + firstOrg.name);",
                  "        console.log('üìä Total organizations: ' + response.data.organizations.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/organizations?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["organizations"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "List all organizations. Automatically sets organizationId to the first organization."
          }
        },
        {
          "name": "Get Organization by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Organization retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data.organization).to.have.property('id');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.organization) {",
                  "        console.log('üè¢ Organization: ' + response.data.organization.name);",
                  "        console.log('üìä Type: ' + response.data.organization.type);",
                  "        console.log('‚úÖ Active: ' + response.data.organization.isActive);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/organizations/{{organizationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["organizations", "{{organizationId}}"]
            },
            "description": "Get a specific organization by ID"
          }
        },
        {
          "name": "Update Organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Organization updated successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.organization) {",
                  "        console.log('‚úÖ Organization updated: ' + response.data.organization.name);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Acme Microfinance Updated\",\n  \"address\": \"456 Business District, New City\",\n  \"phone\": \"+1234567899\",\n  \"email\": \"contact@acmemicrofinance.com\",\n  \"website\": \"https://acmemicrofinance.org\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/organizations/{{organizationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["organizations", "{{organizationId}}"]
            },
            "description": "Update an existing organization (Super Admin or Admin only)"
          }
        },
        {
          "name": "Update Organization Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Organization status updated', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.organization) {",
                  "        console.log('‚úÖ Organization status updated');",
                  "        console.log('üè¢ Organization: ' + response.data.organization.name);",
                  "        console.log('üìä Active: ' + response.data.organization.isActive);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/organizations/{{organizationId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["organizations", "{{organizationId}}", "status"]
            },
            "description": "Activate or deactivate an organization (Super Admin only)"
          }
        },
        {
          "name": "Get Organization Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Statistics retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.statistics) {",
                  "        const stats = response.data.statistics;",
                  "        console.log('üìä Organization Statistics:');",
                  "        console.log('üë• Total Users: ' + (stats.totalUsers || 0));",
                  "        console.log('üè¢ Total Branches: ' + (stats.totalBranches || 0));",
                  "        console.log('üë§ Total Clients: ' + (stats.totalClients || 0));",
                  "        console.log('üí∞ Total Loans: ' + (stats.totalLoans || 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/organizations/{{organizationId}}/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["organizations", "{{organizationId}}", "statistics"]
            },
            "description": "Get statistics for a specific organization including user counts, branch counts, client counts, and loan counts"
          }
        }
      ]
    },
    {
      "name": "üë• Client Management",
      "description": "Client management endpoints with automatic ID population",
      "item": [
        {
          "name": "Create Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// Auto-populate client ID from creation response",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    ",
                  "    if (response.success && response.data && response.data.client) {",
                  "        pm.collectionVariables.set('clientId', response.data.client.id);",
                  "        console.log('‚úÖ Client ID updated: ' + response.data.client.id);",
                  "        console.log('‚úÖ Client created: ' + response.data.client.firstName + ' ' + response.data.client.lastName);",
                  "    }",
                  "}",
                  "",
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Client created successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data.client).to.have.property('id');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith\",\n  \"email\": \"jane.smith@example.com\",\n  \"phoneNumber\": \"+1234567890\",\n  \"dateOfBirth\": \"1990-05-15\",\n  \"nationalId\": \"ID123456789\",\n  \"address\": \"123 Main Street, City, Country\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients",
              "host": ["{{baseUrl}}"],
              "path": ["clients"]
            },
            "description": "Create a new client. Automatically populates clientId variable with the created client's ID.\\n\\n‚ö†Ô∏è **Multi-Tenant Note**: This endpoint requires an organization context. If you're logged in as a Super Admin, you'll need to:\\n1. First create or select an organization\\n2. The system will automatically scope clients to your organization\\n\\nFor regular users, clients are automatically created within their organization."
          }
        },
        {
          "name": "List Clients",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Clients list retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "// Auto-populate first client ID if available",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.clients && response.data.clients.length > 0) {",
                  "        const firstClient = response.data.clients[0];",
                  "        pm.collectionVariables.set('clientId', firstClient.id);",
                  "        console.log('‚úÖ First client ID set: ' + firstClient.id);",
                  "        console.log('üìä Total clients found: ' + response.data.clients.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["clients"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "List clients with pagination. Automatically sets clientId to the first client in the list."
          }
        },
        {
          "name": "Get Client by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Client retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data.client).to.have.property('id');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.client) {",
                  "        const client = response.data.client;",
                  "        console.log('üë§ Client: ' + client.firstName + ' ' + client.lastName);",
                  "        console.log('üìß Email: ' + (client.email || 'N/A'));",
                  "        console.log('üìä KYC Status: ' + (client.kycStatus || 'PENDING'));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "{{clientId}}"]
            },
            "description": "Get a specific client by ID"
          }
        },
        {
          "name": "Update Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Client updated successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.client) {",
                  "        console.log('‚úÖ Client updated: ' + response.data.client.firstName + ' ' + response.data.client.lastName);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Jane\",\n  \"lastName\": \"Smith-Updated\",\n  \"phoneNumber\": \"+1987654321\",\n  \"address\": \"456 New Street, City, Country\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "{{clientId}}"]
            },
            "description": "Update an existing client's information"
          }
        },
        {
          "name": "Update Client KYC Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('KYC status updated', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.client) {",
                  "        console.log('‚úÖ KYC Status updated');",
                  "        console.log('üë§ Client: ' + response.data.client.firstName + ' ' + response.data.client.lastName);",
                  "        console.log('üìä New Status: ' + response.data.client.kycStatus);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"VERIFIED\",\n  \"notes\": \"All documents verified successfully\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients/{{clientId}}/kyc-status",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "{{clientId}}", "kyc-status"]
            },
            "description": "Update client KYC status (Manager or Admin only). Valid statuses: PENDING, VERIFIED, REJECTED"
          }
        },
        {
          "name": "Add KYC Document",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('KYC document added', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    console.log('‚úÖ KYC document added successfully');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"documentType\": \"NATIONAL_ID\",\n  \"documentNumber\": \"ID123456789\",\n  \"issuedDate\": \"2020-01-15\",\n  \"expiryDate\": \"2030-01-15\",\n  \"documentUrl\": \"https://storage.example.com/docs/id-front.jpg\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients/{{clientId}}/kyc-documents",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "{{clientId}}", "kyc-documents"]
            },
            "description": "Add a KYC document to a client's profile. Document types: NATIONAL_ID, PASSPORT, DRIVER_LICENSE, UTILITY_BILL, etc."
          }
        },
        {
          "name": "Get Client Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Statistics retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.statistics) {",
                  "        const stats = response.data.statistics;",
                  "        console.log('üìä Client Statistics:');",
                  "        console.log('üë• Total Clients: ' + (stats.totalClients || 0));",
                  "        console.log('‚úÖ Active Clients: ' + (stats.activeClients || 0));",
                  "        console.log('üìã KYC Verified: ' + (stats.verifiedClients || 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients/statistics/summary",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "statistics", "summary"]
            },
            "description": "Get client statistics for the organization including total counts, active counts, and KYC status breakdown"
          }
        },
        {
          "name": "üëë Super Admin - Get All Clients (Global)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Global clients list retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.clients && response.data.clients.length > 0) {",
                  "        const firstClient = response.data.clients[0];",
                  "        pm.collectionVariables.set('clientId', firstClient.id);",
                  "        console.log('‚úÖ First client ID set: ' + firstClient.id);",
                  "        console.log('üìä Total clients across all orgs: ' + response.data.total);",
                  "        console.log('üìÑ Page ' + response.data.page + ' of ' + response.data.totalPages);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients/admin/all?page=1&limit=25",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "admin", "all"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "25"
                },
                {
                  "key": "search",
                  "value": "",
                  "description": "Search by name, email, phone, client number",
                  "disabled": true
                },
                {
                  "key": "organizationId",
                  "value": "{{organizationId}}",
                  "description": "Filter by specific organization",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "false",
                  "description": "Filter by active status (true/false)",
                  "disabled": true
                }
              ]
            },
            "description": "**Super Admin Only** - Get all clients across ALL organizations with filtering and pagination.\n\n**Query Parameters:**\n- page: Page number (default: 1)\n- limit: Items per page (default: 50)\n- search: Search by name, email, phone, or client number\n- organizationId: Filter by specific organization\n- isActive: Filter by active status (true/false)\n\n**Use Case:** Super Admin dashboard to view and manage clients across all organizations, including finding inactive clients for cleanup."
          }
        },
        {
          "name": "üëë Super Admin - Permanently Delete Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Client permanently deleted', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    console.log('üóëÔ∏è Client permanently deleted');",
                  "    console.log('‚ö†Ô∏è This action cannot be undone');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/clients/admin/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "admin", "{{clientId}}"]
            },
            "description": "**Super Admin Only** - Permanently delete a client from ANY organization.\n\n‚ö†Ô∏è **WARNING**: This is a HARD DELETE that cannot be undone!\n\n**Restrictions:**\n- Cannot delete clients with loan history\n- All related records (contacts, addresses, documents, etc.) will be deleted\n\n**Use Case:** Removing test data or clients that were created in error and have no loan history."
          }
        },
        {
          "name": "üëë Super Admin - Bulk Permanently Delete Clients",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Bulk delete completed', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üóëÔ∏è Bulk delete completed');",
                  "        console.log('‚úÖ Deleted: ' + (response.data.deleted || 0));",
                  "        console.log('‚ùå Skipped (have loans): ' + (response.data.skipped || 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clientIds\": [\"client-id-1\", \"client-id-2\", \"client-id-3\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/clients/admin/bulk/permanent",
              "host": ["{{baseUrl}}"],
              "path": ["clients", "admin", "bulk", "permanent"]
            },
            "description": "**Super Admin Only** - Permanently delete multiple clients from ANY organization in one request.\n\n‚ö†Ô∏è **WARNING**: This is a HARD DELETE that cannot be undone!\n\n**Request Body:**\n```json\n{\n  \"clientIds\": [\"uuid-1\", \"uuid-2\", \"uuid-3\"]\n}\n```\n\n**Behavior:**\n- Clients WITH loan history will be SKIPPED (not deleted)\n- Clients WITHOUT loans will be permanently deleted\n- Response includes count of deleted and skipped clients\n\n**Use Case:** Cleanup of inactive test clients or bulk removal of clients without loan history."
          }
        }
      ]
    },
    {
      "name": "üìù Notes",
      "description": "Notes management - attach notes to clients, loans, payments, and other entities",
      "item": [
        {
          "name": "Get Notes for Entity",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.length > 0) {",
                  "        pm.collectionVariables.set('noteId', response.data[0].id);",
                  "        console.log('üìù First note ID set: ' + response.data[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/CLIENT/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "CLIENT", "{{clientId}}"]
            },
            "description": "Get all notes for a specific entity. Entity types: CLIENT, LOAN, PAYMENT, DISBURSEMENT, LOAN_APPLICATION, COLLATERAL, GROUP"
          }
        },
        {
          "name": "Get Notes for Loan",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/LOAN/{{loanId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "LOAN", "{{loanId}}"]
            },
            "description": "Get all notes attached to a specific loan"
          }
        },
        {
          "name": "Get Notes Count",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/CLIENT/{{clientId}}/count",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "CLIENT", "{{clientId}}", "count"]
            },
            "description": "Get the count of notes for a specific entity"
          }
        },
        {
          "name": "Create Note for Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data) {",
                  "        pm.collectionVariables.set('noteId', response.data.id);",
                  "        console.log('üìù ‚úÖ Note created! ID: ' + response.data.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Important note about this client. Follow up required next week.\",\n  \"priority\": \"HIGH\",\n  \"isPinned\": true,\n  \"isPrivate\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notes/CLIENT/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "CLIENT", "{{clientId}}"]
            },
            "description": "Create a new note for a client. Priority options: LOW, NORMAL, HIGH, URGENT"
          }
        },
        {
          "name": "Create Note for Loan",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data) {",
                  "        pm.collectionVariables.set('noteId', response.data.id);",
                  "        console.log('üìù ‚úÖ Loan note created! ID: ' + response.data.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Loan disbursement approved. Client confirmed receipt.\",\n  \"priority\": \"NORMAL\",\n  \"isPinned\": false,\n  \"isPrivate\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notes/LOAN/{{loanId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "LOAN", "{{loanId}}"]
            },
            "description": "Create a new note for a loan"
          }
        },
        {
          "name": "Update Note",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Updated note content with additional information.\",\n  \"priority\": \"URGENT\",\n  \"isPinned\": true,\n  \"isPrivate\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "{{noteId}}"]
            },
            "description": "Update an existing note's content, priority, pin status, or privacy"
          }
        },
        {
          "name": "Toggle Note Pin",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/{{noteId}}/toggle-pin",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "{{noteId}}", "toggle-pin"]
            },
            "description": "Toggle the pin status of a note. Pinned notes appear at the top of note lists."
          }
        },
        {
          "name": "Delete Note",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notes", "{{noteId}}"]
            },
            "description": "Delete a note permanently"
          }
        }
      ]
    },
    {
      "name": "üõ°Ô∏è Collaterals",
      "description": "Collateral management - types, client collaterals, and loan linking",
      "item": [
        {
          "name": "Get Collateral Types",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.collateralTypes && response.data.collateralTypes.length > 0) {",
                  "        pm.collectionVariables.set('collateralTypeId', response.data.collateralTypes[0].id);",
                  "        console.log('üõ°Ô∏è First collateral type ID set: ' + response.data.collateralTypes[0].id);",
                  "        console.log('üìä Total collateral types: ' + response.data.collateralTypes.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/types",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "types"]
            },
            "description": "Get all collateral types for the organization"
          }
        },
        {
          "name": "Create Collateral Type",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.collateralType) {",
                  "        pm.collectionVariables.set('collateralTypeId', response.data.collateralType.id);",
                  "        console.log('‚úÖ Created collateral type: ' + response.data.collateralType.name);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Electronics\",\n  \"description\": \"Electronic devices and gadgets\",\n  \"requiredDocuments\": [\"receipt\", \"warranty\"],\n  \"depreciationRate\": 20,\n  \"maxLoanToValue\": 60\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/collaterals/types",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "types"]
            },
            "description": "Create a new collateral type. Requires collaterals:manage permission."
          }
        },
        {
          "name": "Seed Default Collateral Types",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚úÖ ' + response.message);",
                  "    if (response.data) {",
                  "        console.log('Created: ' + response.data.created.join(', '));",
                  "        console.log('Skipped: ' + response.data.skipped.join(', '));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/types/seed",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "types", "seed"]
            },
            "description": "Seed default collateral types (Vehicle, Property, Equipment, Inventory, Securities, Livestock, etc). Requires ORG_ADMIN or system:manage permission."
          }
        },
        {
          "name": "Update Collateral Type",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Motor Vehicles\",\n  \"description\": \"Updated description for vehicles\",\n  \"depreciationRate\": 15,\n  \"maxLoanToValue\": 70,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/collaterals/types/{{collateralTypeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "types", "{{collateralTypeId}}"]
            },
            "description": "Update an existing collateral type"
          }
        },
        {
          "name": "Delete Collateral Type",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/types/{{collateralTypeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "types", "{{collateralTypeId}}"]
            },
            "description": "Delete a collateral type"
          }
        },
        {
          "name": "Get Client Collaterals",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.collaterals && response.data.collaterals.length > 0) {",
                  "        pm.collectionVariables.set('collateralId', response.data.collaterals[0].id);",
                  "        console.log('üõ°Ô∏è First collateral ID set: ' + response.data.collaterals[0].id);",
                  "        console.log('üí∞ Total value: ' + response.data.collaterals.reduce((sum, c) => sum + c.estimatedValue, 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/client/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "client", "{{clientId}}"]
            },
            "description": "Get all collaterals for a specific client"
          }
        },
        {
          "name": "Get Client Collateral Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/client/{{clientId}}/summary",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "client", "{{clientId}}", "summary"]
            },
            "description": "Get collateral summary including total value for a client"
          }
        },
        {
          "name": "Create Client Collateral",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.collateral) {",
                  "        pm.collectionVariables.set('collateralId', response.data.collateral.id);",
                  "        console.log('‚úÖ Created collateral: ' + response.data.collateral.description);",
                  "        console.log('üí∞ Value: ' + response.data.collateral.estimatedValue);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"collateralTypeId\": \"{{collateralTypeId}}\",\n  \"description\": \"2020 Toyota Hilux Double Cab\",\n  \"estimatedValue\": 25000,\n  \"currency\": \"USD\",\n  \"ownershipStatus\": \"FULLY_OWNED\",\n  \"registrationNumber\": \"ABC 1234\",\n  \"make\": \"Toyota\",\n  \"model\": \"Hilux\",\n  \"year\": 2020,\n  \"location\": \"Harare\",\n  \"notes\": \"Good condition, service history available\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/collaterals/client/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "client", "{{clientId}}"]
            },
            "description": "Create a new collateral for a client"
          }
        },
        {
          "name": "Get Collateral by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/{{collateralId}}",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "{{collateralId}}"]
            },
            "description": "Get a specific collateral by ID"
          }
        },
        {
          "name": "Update Collateral",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"2020 Toyota Hilux Double Cab - Updated\",\n  \"estimatedValue\": 23000,\n  \"status\": \"PLEDGED\",\n  \"notes\": \"Pledged as security for loan\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/collaterals/{{collateralId}}",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "{{collateralId}}"]
            },
            "description": "Update a collateral's details or status"
          }
        },
        {
          "name": "Update Collateral Valuation",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"valuedAmount\": 22000,\n  \"valuedBy\": \"John Valuator\",\n  \"valuationNotes\": \"Market depreciation considered\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/collaterals/{{collateralId}}/valuation",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "{{collateralId}}", "valuation"]
            },
            "description": "Update the valuation of a collateral"
          }
        },
        {
          "name": "Link Collateral to Loan",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/collaterals/{{collateralId}}/link-loan",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "{{collateralId}}", "link-loan"]
            },
            "description": "Link/pledge a collateral to a loan"
          }
        },
        {
          "name": "Unlink Collateral from Loan",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/{{collateralId}}/unlink-loan",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "{{collateralId}}", "unlink-loan"]
            },
            "description": "Unlink/release a collateral from a loan"
          }
        },
        {
          "name": "Get Collateral Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "statistics"]
            },
            "description": "Get collateral statistics for the organization"
          }
        },
        {
          "name": "Delete Collateral",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/collaterals/{{collateralId}}",
              "host": ["{{baseUrl}}"],
              "path": ["collaterals", "{{collateralId}}"]
            },
            "description": "Delete a collateral"
          }
        }
      ]
    },
    {
      "name": "üí∞ Loans & Payments",
      "description": "Loan and payment management endpoints",
      "item": [
        {
          "name": "List Loans",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Auto-populate first loan ID if available",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.loans && response.data.loans.length > 0) {",
                  "        const firstLoan = response.data.loans[0];",
                  "        pm.collectionVariables.set('loanId', firstLoan.id);",
                  "        console.log('‚úÖ First loan ID set: ' + firstLoan.id);",
                  "        console.log('üí∞ Loan amount: ' + firstLoan.amount);",
                  "        console.log('üìä Total loans: ' + response.data.loans.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loans?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["loans"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "List loans with pagination. Automatically sets loanId to the first loan."
          }
        },
        {
          "name": "List Payments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Auto-populate first payment ID if available",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.payments && response.data.payments.length > 0) {",
                  "        const firstPayment = response.data.payments[0];",
                  "        pm.collectionVariables.set('paymentId', firstPayment.id);",
                  "        console.log('‚úÖ First payment ID set: ' + firstPayment.id);",
                  "        console.log('üí≥ Payment amount: ' + firstPayment.amount);",
                  "        console.log('üìä Total payments: ' + response.data.payments.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payments?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["payments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "List payments with pagination. Automatically sets paymentId to the first payment."
          }
        }
      ]
    },
    {
      "name": "üë§ User Management",
      "description": "User management endpoints with CRUD operations",
      "item": [
        {
          "name": "List Users",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Users list retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.users && response.data.users.length > 0) {",
                  "        const firstUser = response.data.users[0];",
                  "        pm.collectionVariables.set('targetUserId', firstUser.id);",
                  "        console.log('‚úÖ First user ID set as targetUserId: ' + firstUser.id);",
                  "        console.log('üìä Total users found: ' + response.data.users.length);",
                  "        console.log('üìÑ Pagination: Page ' + (response.data.pagination?.page || 1) + ' of ' + (response.data.pagination?.pages || 1));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "role",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "isActive",
                  "value": "true",
                  "disabled": true
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                }
              ]
            },
            "description": "List all users with pagination and filtering options. Enable optional query params to filter by role, active status, or search term."
          }
        },
        {
          "name": "Get User by ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        const user = response.data.user;",
                  "        console.log('üë§ User: ' + user.firstName + ' ' + user.lastName);",
                  "        console.log('üìß Email: ' + user.email);",
                  "        console.log('üé≠ Role: ' + user.role);",
                  "        console.log('‚úÖ Active: ' + user.isActive);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}"]
            },
            "description": "Get a specific user by ID"
          }
        },
        {
          "name": "Create User",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('User created successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        pm.collectionVariables.set('targetUserId', response.data.user.id);",
                  "        console.log('‚úÖ New user created: ' + response.data.user.firstName + ' ' + response.data.user.lastName);",
                  "        console.log('üÜî User ID set as targetUserId: ' + response.data.user.id);",
                  "        console.log('üé≠ Role: ' + response.data.user.role);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newstaff@microfinex.com\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"New\",\n  \"lastName\": \"Staff\",\n  \"role\": \"STAFF\",\n  \"organizationId\": \"{{organizationId}}\",\n  \"phone\": \"+1234567890\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["users"]
            },
            "description": "Create a new user (Admin, Manager, or Super Admin only). Available roles: SUPER_ADMIN, ADMIN, ORG_ADMIN, MANAGER, LOAN_OFFICER, ACCOUNTANT, TELLER, STAFF"
          }
        },
        {
          "name": "Update User",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User updated successfully', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        console.log('‚úÖ User updated: ' + response.data.user.firstName + ' ' + response.data.user.lastName);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Updated\",\n  \"lastName\": \"User\",\n  \"phone\": \"+1987654321\",\n  \"role\": \"LOAN_OFFICER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}"]
            },
            "description": "Update an existing user's information"
          }
        },
        {
          "name": "Update User Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User status updated', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        console.log('‚úÖ User status updated');",
                  "        console.log('üë§ User: ' + response.data.user.firstName + ' ' + response.data.user.lastName);",
                  "        console.log('üìä Active: ' + response.data.user.isActive);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}", "status"]
            },
            "description": "Activate or deactivate a user (Admin only)"
          }
        },
        {
          "name": "Assign User to Branch",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User assigned to branch', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        console.log('‚úÖ User assigned to branch');",
                  "        console.log('üë§ User: ' + response.data.user.firstName + ' ' + response.data.user.lastName);",
                  "        console.log('üè¢ Branch ID: ' + (response.data.user.branchId || 'None'));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"branchId\": \"{{branchId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}/branch",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}", "branch"]
            },
            "description": "Assign or reassign a user to a specific branch. Set branchId to null to remove from branch."
          }
        },
        {
          "name": "Reset User Password",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Password reset successful', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    console.log('‚úÖ User password has been reset');",
                  "    console.log('‚ÑπÔ∏è User will need to use the new password to login');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newPassword\": \"NewSecurePassword123!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}", "reset-password"]
            },
            "description": "Reset a user's password (Admin action). The user will need to use the new password to login."
          }
        },
        {
          "name": "Get User Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Statistics retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.statistics) {",
                  "        const stats = response.data.statistics;",
                  "        console.log('üìä User Statistics:');",
                  "        console.log('üë• Total Users: ' + (stats.totalUsers || 0));",
                  "        console.log('‚úÖ Active Users: ' + (stats.activeUsers || 0));",
                  "        console.log('‚ùå Inactive Users: ' + (stats.inactiveUsers || 0));",
                  "        if (stats.byRole) {",
                  "            console.log('üëî By Role: ' + JSON.stringify(stats.byRole));",
                  "        }",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["users", "statistics"]
            },
            "description": "Get user statistics including total counts, active/inactive counts, and counts by role (Admin or Manager only)"
          }
        },
        {
          "name": "Delete User",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 204', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 204]);",
                  "});",
                  "",
                  "if (pm.response.code === 200 || pm.response.code === 204) {",
                  "    console.log('‚úÖ User deleted successfully');",
                  "    pm.collectionVariables.set('targetUserId', '');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}"]
            },
            "description": "Delete a user (Admin only). This is typically a soft delete."
          }
        },
        {
          "name": "Get Current User Profile",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User profile retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data.user).to.have.property('id');",
                  "});",
                  "",
                  "// Log user profile info",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        const user = response.data.user;",
                  "        console.log('üë§ Current user: ' + user.firstName + ' ' + user.lastName);",
                  "        console.log('üìß Email: ' + user.email);",
                  "        console.log('üé≠ Role: ' + user.role);",
                  "        if (user.organization) {",
                  "            console.log('üè¢ Organization: ' + user.organization.name);",
                  "        } else {",
                  "            console.log('üëë Super Admin - No organization restriction');",
                  "        }",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            },
            "description": "Get the current user's profile information including role and organization."
          }
        },
        {
          "name": "Get Users Pending Verification",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üìã Users pending verification: ' + response.data.count);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/pending-verification",
              "host": ["{{baseUrl}}"],
              "path": ["users", "pending-verification"]
            },
            "description": "Get all users who have not yet verified their email. Super Admin sees all users, Admins see only their organization's users."
          }
        },
        {
          "name": "Verify User Email (Super Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        console.log('‚úÖ Email verified for: ' + response.data.user.email);",
                  "        console.log('üîê isEmailVerified: ' + response.data.user.isEmailVerified);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}/verify-email",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}", "verify-email"]
            },
            "description": "Manually verify a user's email address (Super Admin only). This bypasses email verification and allows the user to access the system immediately."
          }
        },
        {
          "name": "Unverify User Email (Super Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        console.log('‚ùå Email verification revoked for: ' + response.data.user.email);",
                  "        console.log('üîê isEmailVerified: ' + response.data.user.isEmailVerified);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/{{targetUserId}}/unverify-email",
              "host": ["{{baseUrl}}"],
              "path": ["users", "{{targetUserId}}", "unverify-email"]
            },
            "description": "Revoke a user's email verification (Super Admin only). This will require the user to verify their email again."
          }
        }
      ]
    },
    {
      "name": "‚öôÔ∏è Settings",
      "description": "Organization settings management endpoints",
      "item": [
        {
          "name": "Get All Settings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/settings",
              "host": ["{{baseUrl}}"],
              "path": ["settings"]
            },
            "description": "Get all settings for the organization"
          }
        },
        {
          "name": "Get Single Setting",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/settings/:key",
              "host": ["{{baseUrl}}"],
              "path": ["settings", ":key"],
              "variable": [
                {
                  "key": "key",
                  "value": "default_currency"
                }
              ]
            },
            "description": "Get a specific setting by key"
          }
        },
        {
          "name": "Update Setting",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settingValue\": \"USD\",\n  \"description\": \"Default currency for the organization\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/settings/:key",
              "host": ["{{baseUrl}}"],
              "path": ["settings", ":key"],
              "variable": [
                {
                  "key": "key",
                  "value": "default_currency"
                }
              ]
            },
            "description": "Update a setting value"
          }
        },
        {
          "name": "Reset Setting",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/settings/reset/:key",
              "host": ["{{baseUrl}}"],
              "path": ["settings", "reset", ":key"],
              "variable": [
                {
                  "key": "key",
                  "value": "default_currency"
                }
              ]
            },
            "description": "Reset a setting to its default value"
          }
        }
      ]
    },
    {
      "name": "üí± Exchange Rates",
      "description": "Currency exchange rate management endpoints",
      "item": [
        {
          "name": "Get Current Rates",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/exchange-rates",
              "host": ["{{baseUrl}}"],
              "path": ["exchange-rates"]
            },
            "description": "Get all current exchange rates for the organization"
          }
        },
        {
          "name": "Set Exchange Rate",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fromCurrency\": \"USD\",\n  \"toCurrency\": \"ZWG\",\n  \"rate\": 15.5,\n  \"effectiveDate\": \"2024-01-01T00:00:00Z\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/exchange-rates",
              "host": ["{{baseUrl}}"],
              "path": ["exchange-rates"]
            },
            "description": "Set a new exchange rate between two currencies"
          }
        },
        {
          "name": "Get Rate History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/exchange-rates/history?from=USD&to=ZWG",
              "host": ["{{baseUrl}}"],
              "path": ["exchange-rates", "history"],
              "query": [
                { "key": "from", "value": "USD" },
                { "key": "to", "value": "ZWG" }
              ]
            },
            "description": "Get historical exchange rates between two currencies"
          }
        },
        {
          "name": "Convert Currency",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/exchange-rates/convert?amount=100&from=USD&to=ZWG",
              "host": ["{{baseUrl}}"],
              "path": ["exchange-rates", "convert"],
              "query": [
                { "key": "amount", "value": "100" },
                { "key": "from", "value": "USD" },
                { "key": "to", "value": "ZWG" }
              ]
            },
            "description": "Convert an amount between two currencies using current rate"
          }
        }
      ]
    },
    {
      "name": "üìÇ Loan Categories",
      "description": "Loan category management endpoints",
      "item": [
        {
          "name": "Get All Loan Categories",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.categories && response.data.categories.length > 0) {",
                  "        pm.collectionVariables.set('categoryId', response.data.categories[0].id);",
                  "        console.log('‚úÖ Category ID set: ' + response.data.categories[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-categories",
              "host": ["{{baseUrl}}"],
              "path": ["loan-categories"]
            },
            "description": "Get all loan categories for the organization"
          }
        },
        {
          "name": "Get Single Loan Category",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-categories/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-categories", "{{categoryId}}"]
            },
            "description": "Get a specific loan category by ID"
          }
        },
        {
          "name": "Create Loan Category",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.category) {",
                  "        pm.collectionVariables.set('categoryId', response.data.category.id);",
                  "        console.log('‚úÖ New Category ID set: ' + response.data.category.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Personal Loans\",\n  \"code\": \"PERSONAL\",\n  \"description\": \"Standard personal loans for individual clients\",\n  \"isLongTerm\": false,\n  \"requiresBusinessVisit\": false,\n  \"requiresHomeVisit\": true,\n  \"requiresSecurityPledge\": false,\n  \"requiresCollateral\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-categories",
              "host": ["{{baseUrl}}"],
              "path": ["loan-categories"]
            },
            "description": "Create a new loan category"
          }
        },
        {
          "name": "Update Loan Category",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Personal Loans Updated\",\n  \"description\": \"Updated description for personal loans\",\n  \"requiresHomeVisit\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-categories/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-categories", "{{categoryId}}"]
            },
            "description": "Update an existing loan category"
          }
        },
        {
          "name": "Delete Loan Category",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-categories/{{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-categories", "{{categoryId}}"]
            },
            "description": "Delete a loan category (soft delete)"
          }
        }
      ]
    },
    {
      "name": "üì¶ Loan Products",
      "description": "Loan product management endpoints",
      "item": [
        {
          "name": "Get All Loan Products",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.products && response.data.products.length > 0) {",
                  "        pm.collectionVariables.set('productId', response.data.products[0].id);",
                  "        console.log('‚úÖ Product ID set: ' + response.data.products[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-products",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products"]
            },
            "description": "Get all loan products for the organization"
          }
        },
        {
          "name": "Get Loan Products by Category",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-products?categoryId={{categoryId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products"],
              "query": [{ "key": "categoryId", "value": "{{categoryId}}" }]
            },
            "description": "Get loan products filtered by category"
          }
        },
        {
          "name": "Get Active Loan Products",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-products?isActive=true",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products"],
              "query": [{ "key": "isActive", "value": "true" }]
            },
            "description": "Get all active loan products"
          }
        },
        {
          "name": "Get Products for Calculator",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-products/calculator",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products", "calculator"]
            },
            "description": "Get loan products formatted for loan calculator"
          }
        },
        {
          "name": "Get Single Loan Product",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products", "{{productId}}"]
            },
            "description": "Get a specific loan product by ID"
          }
        },
        {
          "name": "Create Loan Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.product) {",
                  "        pm.collectionVariables.set('productId', response.data.product.id);",
                  "        console.log('‚úÖ New Product ID set: ' + response.data.product.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Quick Personal Loan\",\n  \"description\": \"Short-term personal loan with quick approval\",\n  \"type\": \"PERSONAL\",\n  \"categoryId\": \"{{categoryId}}\",\n  \"minAmount\": 100,\n  \"maxAmount\": 5000,\n  \"currency\": \"USD\",\n  \"interestRate\": 0.15,\n  \"calculationMethod\": \"REDUCING_BALANCE\",\n  \"minTerm\": 1,\n  \"maxTerm\": 12,\n  \"repaymentFrequency\": \"MONTHLY\",\n  \"gracePeriod\": 0,\n  \"penaltyRate\": 0.05,\n  \"requiresCollateral\": false,\n  \"requiresGuarantor\": false,\n  \"isOnlineEligible\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-products",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products"]
            },
            "description": "Create a new loan product"
          }
        },
        {
          "name": "Update Loan Product",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Quick Personal Loan - Updated\",\n  \"maxAmount\": 10000,\n  \"interestRate\": 0.12,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products", "{{productId}}"]
            },
            "description": "Update an existing loan product"
          }
        },
        {
          "name": "Duplicate Loan Product",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Quick Personal Loan - Copy\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-products/{{productId}}/duplicate",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products", "{{productId}}", "duplicate"]
            },
            "description": "Duplicate an existing loan product with a new name"
          }
        },
        {
          "name": "Delete Loan Product",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-products", "{{productId}}"]
            },
            "description": "Delete a loan product (soft delete)"
          }
        }
      ]
    },
    {
      "name": "üéØ Loan Purposes",
      "description": "Loan purpose management - CRUD operations and seeding",
      "item": [
        {
          "name": "Get All Loan Purposes",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.purposes && response.data.purposes.length > 0) {",
                  "        pm.collectionVariables.set('loanPurposeId', response.data.purposes[0].id);",
                  "        console.log('üéØ First loan purpose ID set: ' + response.data.purposes[0].id);",
                  "        console.log('üìä Total loan purposes: ' + response.data.purposes.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-purposes",
              "host": ["{{baseUrl}}"],
              "path": ["loan-purposes"]
            },
            "description": "Get all loan purposes for the organization"
          }
        },
        {
          "name": "Get Active Loan Purposes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-purposes?activeOnly=true",
              "host": ["{{baseUrl}}"],
              "path": ["loan-purposes"],
              "query": [{ "key": "activeOnly", "value": "true" }]
            },
            "description": "Get only active loan purposes"
          }
        },
        {
          "name": "Get Loan Purpose by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-purposes/{{loanPurposeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-purposes", "{{loanPurposeId}}"]
            },
            "description": "Get a specific loan purpose by ID"
          }
        },
        {
          "name": "Create Loan Purpose",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data && response.data.purpose) {",
                  "        pm.collectionVariables.set('loanPurposeId', response.data.purpose.id);",
                  "        console.log('üéØ Created loan purpose ID: ' + response.data.purpose.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Vehicle Purchase\",\n  \"code\": \"VEHICLE\",\n  \"description\": \"Loans for purchasing vehicles\",\n  \"sortOrder\": 15\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-purposes",
              "host": ["{{baseUrl}}"],
              "path": ["loan-purposes"]
            },
            "description": "Create a new loan purpose"
          }
        },
        {
          "name": "Update Loan Purpose",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Vehicle Purchase/Financing\",\n  \"description\": \"Loans for purchasing or financing vehicles\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-purposes/{{loanPurposeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-purposes", "{{loanPurposeId}}"]
            },
            "description": "Update an existing loan purpose"
          }
        },
        {
          "name": "Seed Default Loan Purposes (ORG_ADMIN)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.success && response.data) {",
                  "        console.log('üéØ Seeded ' + response.data.count + ' loan purposes');",
                  "        if (response.data.purposes && response.data.purposes.length > 0) {",
                  "            pm.collectionVariables.set('loanPurposeId', response.data.purposes[0].id);",
                  "        }",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-purposes/seed",
              "host": ["{{baseUrl}}"],
              "path": ["loan-purposes", "seed"]
            },
            "description": "Seed default loan purposes. Requires ORG_ADMIN or SUPER_ADMIN role. Seeds: BUSINESS, EDUCATION, MEDICAL, AGRICULTURE, HOME_IMPROVEMENT, EMERGENCY, PERSONAL, DEBT_CONSOLIDATION, ASSET_PURCHASE, HOUSING, WEDDING, TRAVEL, OTHER"
          }
        },
        {
          "name": "Delete Loan Purpose",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-purposes/{{loanPurposeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-purposes", "{{loanPurposeId}}"]
            },
            "description": "Delete a loan purpose permanently"
          }
        }
      ]
    },
    {
      "name": "üìã Loan Workflow",
      "description": "Loan assessment, visits, pledges, and status management endpoints",
      "item": [
        {
          "name": "Get Loan Assessment",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/assessment",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "assessment"]
            },
            "description": "Get assessment details for a specific loan"
          }
        },
        {
          "name": "Create/Update Assessment",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clientCharacter\": \"GOOD\",\n  \"clientCapacity\": \"ADEQUATE\",\n  \"collateralQuality\": \"SATISFACTORY\",\n  \"conditions\": \"FAVORABLE\",\n  \"capitalAdequacy\": \"ADEQUATE\",\n  \"recommendedAmount\": 5000,\n  \"notes\": \"Client has good repayment history\",\n  \"recommendation\": \"APPROVED\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/assessment",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "assessment"]
            },
            "description": "Create or update assessment for a loan"
          }
        },
        {
          "name": "List Loan Visits",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/visits",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "visits"]
            },
            "description": "Get all visits for a specific loan"
          }
        },
        {
          "name": "Create Visit",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"visitType\": \"HOME\",\n  \"scheduledDate\": \"2024-12-01T10:00:00Z\",\n  \"purpose\": \"Initial assessment visit\",\n  \"address\": \"123 Main Street\",\n  \"notes\": \"Client requested morning visit\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/visits",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "visits"]
            },
            "description": "Schedule a new visit for a loan"
          }
        },
        {
          "name": "Update Visit",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"COMPLETED\",\n  \"actualDate\": \"2024-12-01T11:00:00Z\",\n  \"findings\": \"Client resides at stated address, property verified\",\n  \"outcome\": \"POSITIVE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/visits/{{visitId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "visits", "{{visitId}}"]
            },
            "description": "Update visit details and status"
          }
        },
        {
          "name": "List Loan Pledges",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/pledges",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "pledges"]
            },
            "description": "Get all pledges/collateral for a loan"
          }
        },
        {
          "name": "Create Pledge",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pledgeType\": \"VEHICLE\",\n  \"description\": \"2020 Toyota Corolla\",\n  \"estimatedValue\": 15000,\n  \"location\": \"Client premises\",\n  \"registrationNumber\": \"ABC 123 GP\",\n  \"notes\": \"Vehicle in good condition\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/pledges",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "pledges"]
            },
            "description": "Add a pledge/collateral to a loan"
          }
        },
        {
          "name": "Update Pledge",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"VERIFIED\",\n  \"verifiedValue\": 14500,\n  \"verificationNotes\": \"Value confirmed by independent assessor\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/pledges/{{pledgeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "pledges", "{{pledgeId}}"]
            },
            "description": "Update pledge details and verification status"
          }
        },
        {
          "name": "Get Loan Status History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/status-history",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "status-history"]
            },
            "description": "Get complete status transition history for a loan"
          }
        },
        {
          "name": "Transition Loan Status",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newStatus\": \"APPROVED\",\n  \"notes\": \"All requirements verified, loan approved for disbursement\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/transition",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "transition"]
            },
            "description": "Transition a loan to a new status (PENDING ‚Üí UNDER_REVIEW ‚Üí APPROVED ‚Üí DISBURSED ‚Üí ACTIVE, etc.)"
          }
        }
      ]
    },
    {
      "name": "üè™ Shops & Products",
      "description": "Shop management and product catalog endpoints",
      "item": [
        {
          "name": "List Shops",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.shops && response.data.shops.length > 0) {",
                  "        pm.collectionVariables.set('shopId', response.data.shops[0].id);",
                  "        console.log('‚úÖ Shop ID set: ' + response.data.shops[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/shops",
              "host": ["{{baseUrl}}"],
              "path": ["shops"]
            },
            "description": "Get all shops for the organization"
          }
        },
        {
          "name": "Create Shop",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.shop) {",
                  "        pm.collectionVariables.set('shopId', response.data.shop.id);",
                  "        console.log('‚úÖ New Shop ID set: ' + response.data.shop.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Downtown Electronics\",\n  \"address\": \"123 Main Street, City Center\",\n  \"phone\": \"+1234567890\",\n  \"contactPerson\": \"John Smith\",\n  \"bankAccount\": \"1234567890\",\n  \"mobileNumber\": \"+1234567891\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/shops",
              "host": ["{{baseUrl}}"],
              "path": ["shops"]
            },
            "description": "Create a new shop in the organization"
          }
        },
        {
          "name": "Get Shop by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/shops/{{shopId}}",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "{{shopId}}"]
            },
            "description": "Get details of a specific shop"
          }
        },
        {
          "name": "Update Shop",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Downtown Electronics Plus\",\n  \"phone\": \"+1234567899\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/shops/{{shopId}}",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "{{shopId}}"]
            },
            "description": "Update shop details"
          }
        },
        {
          "name": "Delete Shop",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/shops/{{shopId}}",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "{{shopId}}"]
            },
            "description": "Delete a shop (soft delete)"
          }
        },
        {
          "name": "Get Shop Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/shops/{{shopId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "{{shopId}}", "stats"]
            },
            "description": "Get statistics for a specific shop"
          }
        },
        {
          "name": "List Shop Products",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.products && response.data.products.length > 0) {",
                  "        pm.collectionVariables.set('shopProductId', response.data.products[0].id);",
                  "        console.log('‚úÖ Shop Product ID set: ' + response.data.products[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/shops/{{shopId}}/products",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "{{shopId}}", "products"]
            },
            "description": "Get all products for a specific shop"
          }
        },
        {
          "name": "Create Shop Product",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.product) {",
                  "        pm.collectionVariables.set('shopProductId', response.data.product.id);",
                  "        console.log('‚úÖ New Shop Product ID set: ' + response.data.product.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Samsung Galaxy S24\",\n  \"description\": \"Latest Samsung flagship smartphone\",\n  \"price\": 999.99,\n  \"currency\": \"USD\",\n  \"sku\": \"SAM-S24-001\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/shops/{{shopId}}/products",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "{{shopId}}", "products"]
            },
            "description": "Add a new product to a shop"
          }
        },
        {
          "name": "Update Shop Product",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"price\": 949.99,\n  \"description\": \"Samsung Galaxy S24 - Sale Price\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/shops/products/{{shopProductId}}",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "products", "{{shopProductId}}"]
            },
            "description": "Update product details"
          }
        },
        {
          "name": "Delete Shop Product",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/shops/products/{{shopProductId}}",
              "host": ["{{baseUrl}}"],
              "path": ["shops", "products", "{{shopProductId}}"]
            },
            "description": "Delete a product from a shop"
          }
        }
      ]
    },
    {
      "name": "üõí Loan Items",
      "description": "Loan items management - products associated with loans",
      "item": [
        {
          "name": "Add Item to Loan",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.loanItem) {",
                  "        pm.collectionVariables.set('loanItemId', response.data.loanItem.id);",
                  "        console.log('‚úÖ Loan Item ID set: ' + response.data.loanItem.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"shopProductId\": \"{{shopProductId}}\",\n  \"quantity\": 1,\n  \"unitPrice\": 999.99\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-items/loans/{{loanId}}/items",
              "host": ["{{baseUrl}}"],
              "path": ["loan-items", "loans", "{{loanId}}", "items"]
            },
            "description": "Add a product item to a loan"
          }
        },
        {
          "name": "Get Loan Items",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-items/loans/{{loanId}}/items",
              "host": ["{{baseUrl}}"],
              "path": ["loan-items", "loans", "{{loanId}}", "items"]
            },
            "description": "Get all items for a specific loan"
          }
        },
        {
          "name": "Remove Item from Loan",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-items/items/{{loanItemId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-items", "items", "{{loanItemId}}"]
            },
            "description": "Remove an item from a loan"
          }
        },
        {
          "name": "Get Loan Total Value",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-items/loans/{{loanId}}/total",
              "host": ["{{baseUrl}}"],
              "path": ["loan-items", "loans", "{{loanId}}", "total"]
            },
            "description": "Get the total value of all items on a loan"
          }
        },
        {
          "name": "Get Shop Sales Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-items/shops/{{shopId}}/sales-stats?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["loan-items", "shops", "{{shopId}}", "sales-stats"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-12-31" }
              ]
            },
            "description": "Get sales statistics for a shop"
          }
        }
      ]
    },
    {
      "name": "üì± Online Applications",
      "description": "Online loan application management endpoints",
      "item": [
        {
          "name": "List Applications",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.applications && response.data.applications.length > 0) {",
                  "        pm.collectionVariables.set('applicationId', response.data.applications[0].id);",
                  "        console.log('‚úÖ Application ID set: ' + response.data.applications[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications?status=PENDING",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications"],
              "query": [{ "key": "status", "value": "PENDING" }]
            },
            "description": "Get all online applications with optional filters"
          }
        },
        {
          "name": "Create Application",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.application) {",
                  "        pm.collectionVariables.set('applicationId', response.data.application.id);",
                  "        console.log('‚úÖ New Application ID set: ' + response.data.application.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"source\": \"WEB\",\n  \"applicationType\": \"NEW\",\n  \"clientPhone\": \"+263771234567\",\n  \"clientName\": \"Jane Doe\",\n  \"idNumber\": \"63-123456A78\",\n  \"amount\": 5000,\n  \"productId\": \"{{productId}}\",\n  \"disbursementPreference\": \"CASH\",\n  \"notes\": \"Urgent loan request for business expansion\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications"]
            },
            "description": "Submit a new online loan application"
          }
        },
        {
          "name": "Get Application by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "{{applicationId}}"]
            },
            "description": "Get details of a specific application"
          }
        },
        {
          "name": "Update Application",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 6000,\n  \"notes\": \"Amount adjusted based on client request\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "{{applicationId}}"]
            },
            "description": "Update application details"
          }
        },
        {
          "name": "Verify Application",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"Identity verified, documents confirmed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}/verify",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "{{applicationId}}", "verify"]
            },
            "description": "Mark an application as verified"
          }
        },
        {
          "name": "Convert Application to Loan",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clientId\": \"{{clientId}}\",\n  \"loanOfficerId\": \"{{userId}}\",\n  \"branchId\": \"{{branchId}}\",\n  \"interestRate\": 15,\n  \"term\": 12,\n  \"repaymentFrequency\": \"MONTHLY\",\n  \"purpose\": \"Business expansion\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}/convert-to-loan",
              "host": ["{{baseUrl}}"],
              "path": [
                "online-applications",
                "{{applicationId}}",
                "convert-to-loan"
              ]
            },
            "description": "Convert a verified application into a loan. Required: clientId, loanOfficerId, branchId, interestRate, term, repaymentFrequency"
          }
        },
        {
          "name": "Update Application Status",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"REJECTED\",\n  \"notes\": \"Application rejected due to incomplete documentation\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "{{applicationId}}", "status"]
            },
            "description": "Update application status (PENDING, VERIFIED, PROCESSED, EXPIRED, REJECTED)"
          }
        },
        {
          "name": "Get Application Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications/stats?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "stats"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-12-31" }
              ]
            },
            "description": "Get application statistics for the organization"
          }
        }
      ]
    },
    {
      "name": "üîê Roles & Permissions (RBAC)",
      "description": "Role-Based Access Control management endpoints for permissions, roles, and user assignments",
      "item": [
        {
          "name": "Get All Permissions",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.permissions) {",
                  "        console.log('üìã Total permissions: ' + response.data.permissions.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "permissions"]
            },
            "description": "Get all available permissions in the system"
          }
        },
        {
          "name": "Seed Permissions",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 201', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    console.log('‚úÖ Permissions seeded successfully');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/permissions/seed",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "permissions", "seed"]
            },
            "description": "Seed all default permissions (Super Admin only). Creates 120+ granular permissions across 22 modules."
          }
        },
        {
          "name": "Get Permissions by Module",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/permissions?module=clients",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "permissions"],
              "query": [{ "key": "module", "value": "clients" }]
            },
            "description": "Get permissions filtered by module. Available modules: users, clients, loans, payments, organizations, branches, roles, audit, settings, reports, etc."
          }
        },
        {
          "name": "Create Role",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.role) {",
                  "        pm.collectionVariables.set('roleId', response.data.role.id);",
                  "        console.log('‚úÖ Role created: ' + response.data.role.name);",
                  "        console.log('üÜî Role ID set: ' + response.data.role.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Custom Loan Officer\",\n  \"description\": \"Custom role with specific loan management permissions\",\n  \"permissions\": [\n    \"clients.view\",\n    \"clients.create\",\n    \"loans.view\",\n    \"loans.create\",\n    \"loans.approve\",\n    \"payments.view\",\n    \"payments.create\"\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/organization/{{organizationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "organization", "{{organizationId}}"]
            },
            "description": "Create a new custom role for the organization with specified permissions"
          }
        },
        {
          "name": "Get Roles by Organization",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.roles && response.data.roles.length > 0) {",
                  "        pm.collectionVariables.set('roleId', response.data.roles[0].id);",
                  "        console.log('üìã Total roles: ' + response.data.roles.length);",
                  "        console.log('‚úÖ First role ID set: ' + response.data.roles[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/organization/{{organizationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "organization", "{{organizationId}}"]
            },
            "description": "Get all roles for an organization including system and custom roles"
          }
        },
        {
          "name": "Get Role by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}"]
            },
            "description": "Get detailed information about a specific role including its permissions"
          }
        },
        {
          "name": "Update Role",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Senior Loan Officer\",\n  \"description\": \"Updated role with additional permissions\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}"]
            },
            "description": "Update a custom role's name, description, or status"
          }
        },
        {
          "name": "Delete Role",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}"]
            },
            "description": "Delete a custom role (cannot delete system roles)"
          }
        },
        {
          "name": "Update Role Permissions",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permissions\": [\n    \"clients.view\",\n    \"clients.create\",\n    \"clients.update\",\n    \"loans.view\",\n    \"loans.create\",\n    \"loans.update\",\n    \"loans.approve\",\n    \"loans.disburse\",\n    \"payments.view\",\n    \"payments.create\"\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}", "permissions"]
            },
            "description": "Replace all permissions for a role with a new set of permissions"
          }
        },
        {
          "name": "Get Role Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/{{roleId}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "{{roleId}}", "users"]
            },
            "description": "Get all users assigned to a specific role"
          }
        },
        {
          "name": "Get User Roles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/user/{{targetUserId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "user", "{{targetUserId}}", "roles"]
            },
            "description": "Get all roles assigned to a specific user"
          }
        },
        {
          "name": "Assign Role to User",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"roleId\": \"{{roleId}}\",\n  \"expiresAt\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/user/{{targetUserId}}/assign",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "user", "{{targetUserId}}", "assign"]
            },
            "description": "Assign a role to a user. Optionally set an expiration date for temporary assignments."
          }
        },
        {
          "name": "Remove Role from User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/user/{{targetUserId}}/role/{{roleId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "roles",
                "user",
                "{{targetUserId}}",
                "role",
                "{{roleId}}"
              ]
            },
            "description": "Remove a role assignment from a user"
          }
        },
        {
          "name": "Get User Direct Permissions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/user/{{targetUserId}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "user", "{{targetUserId}}", "permissions"]
            },
            "description": "Get permissions directly assigned to a user (not from roles)"
          }
        },
        {
          "name": "Set User Direct Permission",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permissionCode\": \"reports.financial.view\",\n  \"expiresAt\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/roles/user/{{targetUserId}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["roles", "user", "{{targetUserId}}", "permissions"]
            },
            "description": "Grant a specific permission directly to a user (independent of roles)"
          }
        },
        {
          "name": "Remove User Direct Permission",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/user/{{targetUserId}}/permissions/reports.financial.view",
              "host": ["{{baseUrl}}"],
              "path": [
                "roles",
                "user",
                "{{targetUserId}}",
                "permissions",
                "reports.financial.view"
              ]
            },
            "description": "Remove a directly assigned permission from a user"
          }
        },
        {
          "name": "Get User Effective Permissions",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.permissions) {",
                  "        console.log('üîê Total effective permissions: ' + response.data.permissions.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/user/{{targetUserId}}/permissions/effective",
              "host": ["{{baseUrl}}"],
              "path": [
                "roles",
                "user",
                "{{targetUserId}}",
                "permissions",
                "effective"
              ]
            },
            "description": "Get all effective permissions for a user (combined from roles + direct assignments)"
          }
        },
        {
          "name": "Seed Default Roles",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/roles/organization/{{organizationId}}/seed-defaults",
              "host": ["{{baseUrl}}"],
              "path": [
                "roles",
                "organization",
                "{{organizationId}}",
                "seed-defaults"
              ]
            },
            "description": "Seed default roles for an organization (ORG_ADMIN, MANAGER, LOAN_OFFICER, TELLER, etc.)"
          }
        }
      ]
    },
    {
      "name": "üìú Audit Trail",
      "description": "Advanced audit logging and compliance tracking endpoints",
      "item": [
        {
          "name": "Search Audit Logs",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üìã Audit logs found: ' + (response.data.logs?.length || 0));",
                  "        console.log('üìÑ Total records: ' + (response.data.total || 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/logs?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "logs"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" },
                { "key": "action", "value": "", "disabled": true },
                { "key": "resource", "value": "", "disabled": true },
                { "key": "userId", "value": "", "disabled": true },
                { "key": "status", "value": "", "disabled": true },
                { "key": "startDate", "value": "", "disabled": true },
                { "key": "endDate", "value": "", "disabled": true }
              ]
            },
            "description": "Search and filter audit logs with pagination. Filter by action (CREATE, READ, UPDATE, DELETE, LOGIN, LOGOUT), resource type, user, status, and date range."
          }
        },
        {
          "name": "Get Audit Log by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/logs/:logId",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "logs", ":logId"],
              "variable": [{ "key": "logId", "value": "" }]
            },
            "description": "Get detailed information about a specific audit log entry including changes diff"
          }
        },
        {
          "name": "Get My Activity",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.activities) {",
                  "        console.log('üìã Your recent activities: ' + response.data.activities.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/me/activity?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "me", "activity"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" }
              ]
            },
            "description": "Get your own activity history"
          }
        },
        {
          "name": "Get User Activity",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/users/{{targetUserId}}/activity?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "users", "{{targetUserId}}", "activity"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" }
              ]
            },
            "description": "Get activity history for a specific user (Admin only)"
          }
        },
        {
          "name": "Get Entity History",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.history) {",
                  "        console.log('üìã Entity history entries: ' + response.data.history.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/history/Client/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "history", "Client", "{{clientId}}"]
            },
            "description": "Get complete change history for a specific entity. Resource types: Client, Loan, Payment, User, Organization, etc."
          }
        },
        {
          "name": "Get Audit Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.stats) {",
                  "        const stats = response.data.stats;",
                  "        console.log('üìä Audit Statistics:');",
                  "        console.log('üìù Total logs: ' + (stats.totalLogs || 0));",
                  "        console.log('‚úÖ Successful: ' + (stats.successCount || 0));",
                  "        console.log('‚ùå Failed: ' + (stats.failureCount || 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/stats?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "stats"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-12-31" }
              ]
            },
            "description": "Get audit statistics including counts by action, resource, user, and status"
          }
        },
        {
          "name": "Export Audit Logs (CSV)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/export/csv?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "export", "csv"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-12-31" },
                { "key": "action", "value": "", "disabled": true },
                { "key": "resource", "value": "", "disabled": true }
              ]
            },
            "description": "Export audit logs to CSV format for compliance reporting. Filter by date range, action, and resource type."
          }
        },
        {
          "name": "Export Audit Logs (JSON)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/export/json?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "export", "json"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-12-31" }
              ]
            },
            "description": "Export audit logs to JSON format for data analysis and backup"
          }
        },
        {
          "name": "Get Archive Count",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audit/archive/count?olderThanDays=90",
              "host": ["{{baseUrl}}"],
              "path": ["audit", "archive", "count"],
              "query": [{ "key": "olderThanDays", "value": "90" }]
            },
            "description": "Get count of logs that can be archived (older than specified days). Useful before running archive operation."
          }
        }
      ]
    },
    {
      "name": "üîÑ Loan Workflow Engine",
      "description": "Category-aware loan workflow management with assessments, visits, pledges, and disbursements",
      "item": [
        {
          "name": "Get Workflow Status",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üìä Current Status: ' + response.data.currentStatus);",
                  "        console.log('‚úÖ Can Advance: ' + response.data.canAdvance);",
                  "        console.log('üìã Missing: ' + (response.data.missingRequirements?.join(', ') || 'None'));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/workflow-status",
              "host": ["{{baseUrl}}"],
              "path": [
                "loan-workflow",
                "loans",
                "{{loanId}}",
                "workflow-status"
              ]
            },
            "description": "Get complete workflow status including category requirements, completed steps, and next allowed transitions"
          }
        },
        {
          "name": "Submit for Assessment",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.assessment) {",
                  "        pm.collectionVariables.set('assessmentId', response.data.assessment.id);",
                  "        console.log('‚úÖ Assessment created: ' + response.data.assessment.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"assessorId\": \"{{targetUserId}}\",\n  \"notes\": \"Initial assessment request\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/submit-assessment",
              "host": ["{{baseUrl}}"],
              "path": [
                "loan-workflow",
                "loans",
                "{{loanId}}",
                "submit-assessment"
              ]
            },
            "description": "Submit a loan for assessment, creating an assessment record and transitioning to PENDING_ASSESSMENT"
          }
        },
        {
          "name": "Complete Assessment",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"APPROVED\",\n  \"notes\": \"Assessment completed successfully. All documents verified.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/assessments/{{assessmentId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": [
                "loan-workflow",
                "assessments",
                "{{assessmentId}}",
                "complete"
              ]
            },
            "description": "Complete an assessment with APPROVED or REJECTED status. Automatically advances loan to next workflow stage based on category requirements."
          }
        },
        {
          "name": "Create Visit",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.visit) {",
                  "        pm.collectionVariables.set('visitId', response.data.visit.id);",
                  "        console.log('‚úÖ Visit created: ' + response.data.visit.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"visitType\": \"BUSINESS\",\n  \"address\": \"123 Business Street, City\",\n  \"notes\": \"Scheduled business verification visit\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/visits",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "visits"]
            },
            "description": "Schedule a new visit for loan verification. Visit types: BUSINESS, HOME"
          }
        },
        {
          "name": "Complete Visit",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"address\": \"123 Business Street, City\",\n  \"gpsLat\": -17.8292,\n  \"gpsLng\": 31.0522,\n  \"images\": [\"https://storage.example.com/visit-photos/img1.jpg\"],\n  \"notes\": \"Business verified. Location confirmed.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/visits/{{visitId}}/complete",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "visits", "{{visitId}}", "complete"]
            },
            "description": "Mark a visit as completed with GPS coordinates, photos, and notes. Automatically advances workflow if all required visits are done."
          }
        },
        {
          "name": "Create Security Pledge",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.pledge) {",
                  "        pm.collectionVariables.set('pledgeId', response.data.pledge.id);",
                  "        console.log('‚úÖ Pledge created: ' + response.data.pledge.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"itemDescription\": \"Samsung 55-inch Smart TV\",\n  \"serialNumber\": \"SN-123456789\",\n  \"estimatedValue\": 500,\n  \"currency\": \"USD\",\n  \"images\": [\"https://storage.example.com/pledge-photos/tv.jpg\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/pledges",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "pledges"]
            },
            "description": "Register a security pledge for a loan. Required for loans where category.requiresSecurityPledge is true."
          }
        },
        {
          "name": "Verify Pledge and Check Status",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/pledges/{{pledgeId}}/verify-and-check",
              "host": ["{{baseUrl}}"],
              "path": [
                "loan-workflow",
                "pledges",
                "{{pledgeId}}",
                "verify-and-check"
              ]
            },
            "description": "Verify a security pledge and check if the loan can now advance in the workflow"
          }
        },
        {
          "name": "Approve Loan",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"All requirements met. Loan approved for disbursement.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/approve",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "approve"]
            },
            "description": "Approve a loan with category-aware validation. Will fail if required steps (assessment, visits, pledges) are not completed."
          }
        },
        {
          "name": "Reject Loan",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Insufficient income documentation provided\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/reject",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "reject"]
            },
            "description": "Reject a loan application with a reason"
          }
        },
        {
          "name": "Mark for Disbursement",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"notes\": \"Ready for disbursement\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/mark-for-disbursement",
              "host": ["{{baseUrl}}"],
              "path": [
                "loan-workflow",
                "loans",
                "{{loanId}}",
                "mark-for-disbursement"
              ]
            },
            "description": "Mark an approved loan as ready for disbursement"
          }
        },
        {
          "name": "Get Pending Disbursements",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üìã Pending: ' + response.data.count + ' loans');",
                  "        console.log('üí∞ Total: ' + response.data.totalAmount);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/disbursements/pending?branchId={{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "disbursements", "pending"],
              "query": [
                { "key": "branchId", "value": "{{branchId}}", "disabled": true }
              ]
            },
            "description": "Get all loans pending disbursement. Optionally filter by branch."
          }
        },
        {
          "name": "Disburse Loan",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"disbursementMethod\": \"BANK_TRANSFER\",\n  \"reference\": \"TRF-2024-001\",\n  \"notes\": \"Disbursed via bank transfer\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/disburse",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "disburse"]
            },
            "description": "Disburse a loan. Methods: CASH, BANK_TRANSFER, MOBILE_MONEY, CHECK"
          }
        },
        {
          "name": "Batch Disburse Loans",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanIds\": [\"loan-id-1\", \"loan-id-2\", \"loan-id-3\"],\n  \"disbursementMethod\": \"MOBILE_MONEY\",\n  \"notes\": \"Batch disbursement for approved loans\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/disbursements/batch",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "disbursements", "batch"]
            },
            "description": "Disburse multiple loans at once. Returns success and failure counts."
          }
        },
        {
          "name": "Get Loan Workflow History",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/history",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "history"]
            },
            "description": "Get complete workflow history for a loan showing all status transitions"
          }
        },
        {
          "name": "Get Next Statuses",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/loans/{{loanId}}/next-statuses",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "loans", "{{loanId}}", "next-statuses"]
            },
            "description": "Get valid next status transitions for a loan based on current status"
          }
        },
        {
          "name": "Get Pending Assessments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/assessments/pending?mine=true",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "assessments", "pending"],
              "query": [{ "key": "mine", "value": "true", "disabled": true }]
            },
            "description": "Get pending assessments. Set mine=true to see only your assignments."
          }
        },
        {
          "name": "Get Pending Visits",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-workflow/visits/pending?mine=true",
              "host": ["{{baseUrl}}"],
              "path": ["loan-workflow", "visits", "pending"],
              "query": [{ "key": "mine", "value": "true", "disabled": true }]
            },
            "description": "Get scheduled visits that haven't been completed yet"
          }
        }
      ]
    },
    {
      "name": "üåê Public API (No Auth)",
      "description": "Public endpoints for online applications - no authentication required",
      "item": [
        {
          "name": "Get Available Products",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.products) {",
                  "        console.log('üìã Products available: ' + response.data.products.length);",
                  "        if (response.data.products.length > 0) {",
                  "            pm.collectionVariables.set('productId', response.data.products[0].id);",
                  "        }",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/public/products",
              "host": ["{{baseUrl}}"],
              "path": ["public", "products"]
            },
            "description": "Get list of available loan products for online applications (no auth required)"
          }
        },
        {
          "name": "Get Product Details",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/public/products/{{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["public", "products", "{{productId}}"]
            },
            "description": "Get detailed information about a specific loan product including category requirements"
          }
        },
        {
          "name": "Apply - New Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.applicationId) {",
                  "        pm.collectionVariables.set('applicationId', response.data.applicationId);",
                  "        console.log('‚úÖ Application ID: ' + response.data.applicationId);",
                  "        if (response.data.verificationCode) {",
                  "            console.log('üîê Verification Code (dev only): ' + response.data.verificationCode);",
                  "        }",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"source\": \"WEB\",\n  \"clientPhone\": \"+263771234567\",\n  \"clientName\": \"John Doe\",\n  \"idNumber\": \"63-123456-A-78\",\n  \"amount\": 500,\n  \"productId\": \"{{productId}}\",\n  \"disbursementPreference\": \"TRANSFER\",\n  \"mobileNumber\": \"+263771234567\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/public/apply/new",
              "host": ["{{baseUrl}}"],
              "path": ["public", "apply", "new"]
            },
            "description": "Submit a new client loan application. Verification code will be sent via SMS (or shown in response in dev mode)."
          }
        },
        {
          "name": "Apply - Existing Client",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.applicationId) {",
                  "        pm.collectionVariables.set('applicationId', response.data.applicationId);",
                  "        console.log('‚úÖ Application ID: ' + response.data.applicationId);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"source\": \"WEB\",\n  \"clientPhone\": \"+263771234567\",\n  \"amount\": 1000,\n  \"productId\": \"{{productId}}\",\n  \"disbursementPreference\": \"CASH\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/public/apply/existing",
              "host": ["{{baseUrl}}"],
              "path": ["public", "apply", "existing"]
            },
            "description": "Submit an application for an existing client. Phone must match an existing client record."
          }
        },
        {
          "name": "Verify Application",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"applicationId\": \"{{applicationId}}\",\n  \"code\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/public/verify",
              "host": ["{{baseUrl}}"],
              "path": ["public", "verify"]
            },
            "description": "Verify an application using the OTP code sent via SMS"
          }
        },
        {
          "name": "Check Application Status",
          "request": {
            "auth": { "type": "noauth" },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/public/application/{{applicationId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["public", "application", "{{applicationId}}", "status"]
            },
            "description": "Check the status of an online application"
          }
        },
        {
          "name": "Resend OTP",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/public/application/{{applicationId}}/resend-otp",
              "host": ["{{baseUrl}}"],
              "path": [
                "public",
                "application",
                "{{applicationId}}",
                "resend-otp"
              ]
            },
            "description": "Resend the verification OTP code for a pending application"
          }
        },
        {
          "name": "Calculate Loan Repayments",
          "request": {
            "auth": { "type": "noauth" },
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"amount\": 1000,\n  \"term\": 12,\n  \"productId\": \"{{productId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/public/calculate",
              "host": ["{{baseUrl}}"],
              "path": ["public", "calculate"]
            },
            "description": "Calculate loan repayments without authentication. Can use productId for rate or provide interestRate directly."
          }
        }
      ]
    },
    {
      "name": "üìù Online Applications (Admin)",
      "description": "Admin endpoints for managing online applications",
      "item": [
        {
          "name": "List Applications",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.length > 0) {",
                  "        pm.collectionVariables.set('applicationId', response.data[0].id);",
                  "        console.log('üìã Applications: ' + response.data.length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" },
                { "key": "status", "value": "PENDING", "disabled": true },
                { "key": "source", "value": "WEB", "disabled": true }
              ]
            },
            "description": "List all online applications with optional filtering by status, source, etc."
          }
        },
        {
          "name": "Get Application by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "{{applicationId}}"]
            },
            "description": "Get detailed information about a specific application"
          }
        },
        {
          "name": "Get Application Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications/stats",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "stats"]
            },
            "description": "Get statistics on online applications including counts by source, status, and conversion rates"
          }
        },
        {
          "name": "Process Application (Approve/Reject)",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"approve\",\n  \"notes\": \"Application verified and approved\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}/process",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "{{applicationId}}", "process"]
            },
            "description": "Approve or reject an online application. Actions: approve, reject"
          }
        },
        {
          "name": "Convert to Loan",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clientId\": \"{{clientId}}\",\n  \"loanOfficerId\": \"{{userId}}\",\n  \"branchId\": \"{{branchId}}\",\n  \"interestRate\": 15,\n  \"term\": 12,\n  \"repaymentFrequency\": \"MONTHLY\",\n  \"purpose\": \"Business expansion\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications/{{applicationId}}/convert-to-loan",
              "host": ["{{baseUrl}}"],
              "path": [
                "online-applications",
                "{{applicationId}}",
                "convert-to-loan"
              ]
            },
            "description": "Convert a verified/processed application into an actual loan"
          }
        },
        {
          "name": "Bulk Update Status",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"applicationIds\": [\"app-id-1\", \"app-id-2\"],\n  \"status\": \"PROCESSED\",\n  \"notes\": \"Bulk processed\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/online-applications/bulk-status",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "bulk-status"]
            },
            "description": "Bulk update status for multiple applications"
          }
        },
        {
          "name": "Get Expired Applications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications/expired",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "expired"]
            },
            "description": "Get applications with expired verification codes"
          }
        },
        {
          "name": "Expire Pending Applications",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/online-applications/expire-pending",
              "host": ["{{baseUrl}}"],
              "path": ["online-applications", "expire-pending"]
            },
            "description": "Bulk expire all pending applications with expired verification codes"
          }
        }
      ]
    },
    {
      "name": "üì§ File Uploads & Biometrics",
      "description": "File upload endpoints for client photos, biometrics, loan documents, and visit/pledge images",
      "item": [
        {
          "name": "Upload Client Photo",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "multipart/form-data" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "description": "Client photo (max 5MB, JPEG/PNG/WebP)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/uploads/clients/{{clientId}}/photo",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "clients", "{{clientId}}", "photo"]
            },
            "description": "Upload a profile photo for a client. Replaces existing photo if one exists. Max 5MB."
          }
        },
        {
          "name": "Upload Client Thumbprint",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "multipart/form-data" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "description": "Thumbprint image (max 2MB, JPEG/PNG/WebP)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/uploads/clients/{{clientId}}/thumbprint",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "clients", "{{clientId}}", "thumbprint"]
            },
            "description": "Upload thumbprint biometric for a client. Replaces existing if one exists. Max 2MB."
          }
        },
        {
          "name": "Upload Client Signature",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "multipart/form-data" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "description": "Signature image (max 1MB, JPEG/PNG/WebP)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/uploads/clients/{{clientId}}/signature",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "clients", "{{clientId}}", "signature"]
            },
            "description": "Upload client signature image. Replaces existing if one exists. Max 1MB."
          }
        },
        {
          "name": "Upload Loan Documents",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "multipart/form-data" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "description": "Document files (max 10MB each, PDF/JPEG/PNG/DOC)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/uploads/loans/{{loanId}}/documents",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "loans", "{{loanId}}", "documents"]
            },
            "description": "Upload multiple documents for a loan. Supports PDF, images, and Office documents. Max 10MB per file."
          }
        },
        {
          "name": "Upload Visit Images",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "multipart/form-data" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "description": "Visit photos (max 5MB each, JPEG/PNG/WebP)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/uploads/loans/{{loanId}}/visits/{{visitId}}/images",
              "host": ["{{baseUrl}}"],
              "path": [
                "uploads",
                "loans",
                "{{loanId}}",
                "visits",
                "{{visitId}}",
                "images"
              ]
            },
            "description": "Upload photos taken during a loan visit (home or business verification)."
          }
        },
        {
          "name": "Upload Pledge Images",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "multipart/form-data" }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "description": "Pledge item photos (max 5MB each, JPEG/PNG/WebP)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/uploads/loans/{{loanId}}/pledges/{{pledgeId}}/images",
              "host": ["{{baseUrl}}"],
              "path": [
                "uploads",
                "loans",
                "{{loanId}}",
                "pledges",
                "{{pledgeId}}",
                "images"
              ]
            },
            "description": "Upload photos of security pledge items (collateral)."
          }
        },
        {
          "name": "Get Signed URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/uploads/signed-url?path=org-id/clients/client-id/photos/file.jpg",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "signed-url"],
              "query": [
                {
                  "key": "path",
                  "value": "org-id/clients/client-id/photos/file.jpg"
                }
              ]
            },
            "description": "Generate a pre-signed URL for accessing a file. URLs expire after 1 hour."
          }
        },
        {
          "name": "Delete File",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/uploads/delete?path=org-id/clients/client-id/photos/file.jpg",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "delete"],
              "query": [
                {
                  "key": "path",
                  "value": "org-id/clients/client-id/photos/file.jpg"
                }
              ]
            },
            "description": "Delete a file from storage. Requires Manager or Admin role."
          }
        },
        {
          "name": "List Files",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/uploads/list?entityType=clients&entityId={{clientId}}&fileType=PHOTO",
              "host": ["{{baseUrl}}"],
              "path": ["uploads", "list"],
              "query": [
                { "key": "entityType", "value": "clients" },
                {
                  "key": "entityId",
                  "value": "{{clientId}}",
                  "disabled": true
                },
                { "key": "fileType", "value": "PHOTO", "disabled": true }
              ]
            },
            "description": "List files in storage. Filter by entityType (clients/loans), entityId, and fileType (PHOTO, DOCUMENT, etc.)."
          }
        }
      ]
    },
    {
      "name": "üîÑ Offline Sync",
      "description": "Offline-first data synchronization endpoints for mobile clients",
      "item": [
        {
          "name": "Get Sync Info",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üìã Supported entities: ' + response.data.supportedEntityTypes.join(', '));",
                  "        console.log('‚ö° Supported actions: ' + response.data.supportedActions.join(', '));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sync/info",
              "host": ["{{baseUrl}}"],
              "path": ["sync", "info"]
            },
            "description": "Get sync system configuration including supported entity types, actions, and usage instructions."
          }
        },
        {
          "name": "Push Changes",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.summary) {",
                  "        console.log('‚úÖ Synced: ' + response.data.summary.synced);",
                  "        console.log('‚ùå Failed: ' + response.data.summary.failed);",
                  "        console.log('‚ö†Ô∏è Conflicts: ' + response.data.summary.conflicts);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"changes\": [\n    {\n      \"entityType\": \"clients\",\n      \"entityId\": \"{{clientId}}\",\n      \"action\": \"UPDATE\",\n      \"payload\": {\n        \"phoneNumber\": \"+263771234567\",\n        \"address\": \"123 New Street\"\n      },\n      \"clientVersion\": 1,\n      \"deviceId\": \"mobile-device-uuid\",\n      \"timestamp\": \"2024-01-15T10:30:00Z\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sync/push",
              "host": ["{{baseUrl}}"],
              "path": ["sync", "push"]
            },
            "description": "Push offline changes from mobile client to server. Returns synced, failed, and conflicting changes."
          }
        },
        {
          "name": "Pull Changes",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üì• Changes: ' + response.data.changes.length);",
                  "        console.log('‚è∞ Last sync: ' + response.data.lastSync);",
                  "        console.log('üìÑ Has more: ' + response.data.hasMore);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sync/pull?lastSync=2024-01-01T00:00:00Z&entityTypes=clients,loans&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["sync", "pull"],
              "query": [
                { "key": "lastSync", "value": "2024-01-01T00:00:00Z" },
                {
                  "key": "entityTypes",
                  "value": "clients,loans",
                  "disabled": true
                },
                { "key": "limit", "value": "50", "disabled": true }
              ]
            },
            "description": "Pull incremental changes from server since last sync. Optionally filter by entity types."
          }
        },
        {
          "name": "Get Pending Conflicts",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚ö†Ô∏è Pending conflicts: ' + (response.data?.conflicts?.length || 0));",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sync/conflicts",
              "host": ["{{baseUrl}}"],
              "path": ["sync", "conflicts"]
            },
            "description": "Get list of unresolved sync conflicts for manual resolution."
          }
        },
        {
          "name": "Resolve Conflicts",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.summary) {",
                  "        console.log('‚úÖ Resolved: ' + response.data.summary.resolved);",
                  "        console.log('‚ùå Failed: ' + response.data.summary.failed);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resolutions\": [\n    {\n      \"conflictId\": \"conflict-uuid-here\",\n      \"resolution\": \"CLIENT_WINS\",\n      \"mergedData\": null\n    },\n    {\n      \"conflictId\": \"another-conflict-uuid\",\n      \"resolution\": \"MERGED\",\n      \"mergedData\": {\n        \"phoneNumber\": \"+263771234567\",\n        \"address\": \"Merged address from both versions\"\n      }\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/sync/resolve",
              "host": ["{{baseUrl}}"],
              "path": ["sync", "resolve"]
            },
            "description": "Resolve sync conflicts. Options: CLIENT_WINS (use client version), SERVER_WINS (use server version), MERGED (provide merged data)."
          }
        },
        {
          "name": "Get Entity Sync Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/sync/status/clients/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["sync", "status", "clients", "{{clientId}}"]
            },
            "description": "Get sync status for a specific entity including version, pending changes, and conflict state."
          }
        }
      ]
    },
    {
      "name": "üõçÔ∏è Product Credit",
      "description": "Product credit loan management - loans disbursed to shops for client product purchases",
      "item": [
        {
          "name": "Create Product Credit Loan",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.loan) {",
                  "        pm.collectionVariables.set('loanId', response.data.loan.id);",
                  "        console.log('‚úÖ Product credit loan created: ' + response.data.loan.id);",
                  "        console.log('üí∞ Amount: ' + response.data.loan.amount);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"clientId\": \"{{clientId}}\",\n  \"shopId\": \"{{shopId}}\",\n  \"items\": [\n    {\n      \"productId\": \"{{shopProductId}}\",\n      \"quantity\": 1,\n      \"unitPrice\": 999.99\n    }\n  ],\n  \"downPayment\": 200,\n  \"termInMonths\": 6,\n  \"interestRate\": 15,\n  \"purpose\": \"Purchase of electronics\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loans/product-credit",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "product-credit"]
            },
            "description": "Create a product credit loan for a client purchasing items from a shop. Amount is calculated from items."
          }
        },
        {
          "name": "Disburse to Shop",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    console.log('‚úÖ Funds disbursed to shop');",
                  "    console.log('üìù Reference: ' + pm.response.json().data?.disbursement?.reference);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"disbursementMethod\": \"BANK_TRANSFER\",\n  \"reference\": \"PCL-2024-001\",\n  \"notes\": \"Disbursement to shop for product credit loan\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loans/product-credit/{{loanId}}/disburse",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "product-credit", "{{loanId}}", "disburse"]
            },
            "description": "Disburse product credit loan funds directly to the shop. Methods: BANK_TRANSFER, MOBILE_MONEY, CHECK"
          }
        },
        {
          "name": "Get Shop Product Credits",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üìã Shop product credits: ' + (response.data?.loans?.length || 0));",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loans/shops/{{shopId}}/product-credits?page=1&limit=20&status=ACTIVE",
              "host": ["{{baseUrl}}"],
              "path": ["loans", "shops", "{{shopId}}", "product-credits"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "20" },
                { "key": "status", "value": "ACTIVE", "disabled": true }
              ]
            },
            "description": "Get all product credit loans for a specific shop. Optionally filter by status."
          }
        },
        {
          "name": "Get Shop Product Credit Stats",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data) {",
                  "        console.log('üìä Total credits: ' + (response.data.totalCredits || 0));",
                  "        console.log('üí∞ Total amount: ' + (response.data.totalAmount || 0));",
                  "        console.log('‚úÖ Active: ' + (response.data.activeCredits || 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loans/shops/{{shopId}}/product-credits/stats",
              "host": ["{{baseUrl}}"],
              "path": [
                "loans",
                "shops",
                "{{shopId}}",
                "product-credits",
                "stats"
              ]
            },
            "description": "Get product credit statistics for a shop including totals, active loans, and payment status."
          }
        }
      ]
    },
    {
      "name": "üîß System & Health",
      "description": "System health and information endpoints",
      "item": [
        {
          "name": "API Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('API is healthy', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.status).to.eql('OK');",
                  "});",
                  "",
                  "// Log system info",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üè• API Status: ' + response.status);",
                  "    console.log('üåç Environment: ' + response.environment);",
                  "    console.log('‚è∞ Uptime: ' + Math.round(response.uptime) + 's');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Check API health status - no authentication required"
          }
        },
        {
          "name": "API Information",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('API info retrieved', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('name');",
                  "    pm.expect(jsonData).to.have.property('version');",
                  "});",
                  "",
                  "// Log API info",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üìã API: ' + response.name);",
                  "    console.log('üè∑Ô∏è Version: ' + response.version);",
                  "    if (response.endpoints) {",
                  "        console.log('üìö Available endpoints: ' + Object.keys(response.endpoints).length);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}",
              "host": ["{{baseUrl}}"]
            },
            "description": "Get API information and available endpoints - no authentication required"
          }
        }
      ]
    },
    {
      "name": "üìß Notifications",
      "description": "Notification system endpoints for SMS, Email, and push notifications",
      "item": [
        {
          "name": "Send SMS",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phoneNumber\": \"+263771234567\",\n  \"message\": \"Your loan payment of $100 is due tomorrow.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/sms",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "sms"]
            },
            "description": "Send an SMS notification to a phone number"
          }
        },
        {
          "name": "Send Email",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"to\": \"client@example.com\",\n  \"subject\": \"Payment Reminder\",\n  \"html\": \"<p>Your loan payment is due soon.</p>\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/email",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "email"]
            },
            "description": "Send an email notification"
          }
        },
        {
          "name": "Get Templates",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/templates",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "templates"]
            },
            "description": "Get all notification templates"
          }
        },
        {
          "name": "Update Template",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Dear {{clientName}}, your payment of {{amount}} is due on {{dueDate}}.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/templates/:templateId",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "templates", ":templateId"],
              "variable": [{ "key": "templateId", "value": "payment_reminder" }]
            },
            "description": "Update a notification template"
          }
        },
        {
          "name": "Get Notification Queue",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/queue?status=pending",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "queue"],
              "query": [{ "key": "status", "value": "pending" }]
            },
            "description": "Get queued notifications by status"
          }
        },
        {
          "name": "Get Client Preferences",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/notifications/preferences/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "preferences", "{{clientId}}"]
            },
            "description": "Get notification preferences for a client"
          }
        },
        {
          "name": "Update Client Preferences",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"smsEnabled\": true,\n  \"emailEnabled\": true,\n  \"paymentReminders\": true,\n  \"marketingMessages\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/notifications/preferences/{{clientId}}",
              "host": ["{{baseUrl}}"],
              "path": ["notifications", "preferences", "{{clientId}}"]
            },
            "description": "Update notification preferences for a client"
          }
        }
      ]
    },
    {
      "name": "üì• Data Import",
      "description": "Bulk data import endpoints for clients, loans, and payments",
      "item": [
        {
          "name": "Import Clients",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "description": "Excel or CSV file with client data"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/import/clients",
              "host": ["{{baseUrl}}"],
              "path": ["import", "clients"]
            },
            "description": "Import clients from Excel/CSV file"
          }
        },
        {
          "name": "Import Loans",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "description": "Excel or CSV file with loan data"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/import/loans",
              "host": ["{{baseUrl}}"],
              "path": ["import", "loans"]
            },
            "description": "Import loans from Excel/CSV file"
          }
        },
        {
          "name": "Import Payments",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "description": "Excel or CSV file with payment data"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/import/payments",
              "host": ["{{baseUrl}}"],
              "path": ["import", "payments"]
            },
            "description": "Import payments from Excel/CSV file"
          }
        },
        {
          "name": "Download Client Template",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/import/templates/clients",
              "host": ["{{baseUrl}}"],
              "path": ["import", "templates", "clients"]
            },
            "description": "Download Excel template for client import"
          }
        },
        {
          "name": "Download Loan Template",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/import/templates/loans",
              "host": ["{{baseUrl}}"],
              "path": ["import", "templates", "loans"]
            },
            "description": "Download Excel template for loan import"
          }
        },
        {
          "name": "Download Payment Template",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/import/templates/payments",
              "host": ["{{baseUrl}}"],
              "path": ["import", "templates", "payments"]
            },
            "description": "Download Excel template for payment import"
          }
        },
        {
          "name": "Get Import Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/import/status/:importId",
              "host": ["{{baseUrl}}"],
              "path": ["import", "status", ":importId"],
              "variable": [{ "key": "importId", "value": "" }]
            },
            "description": "Get status of an import job"
          }
        }
      ]
    },
    {
      "name": "üìä Dashboard",
      "description": "Dashboard and analytics endpoints",
      "item": [
        {
          "name": "Get Summary Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/dashboard/summary",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "summary"]
            },
            "description": "Get summary statistics for the dashboard"
          }
        },
        {
          "name": "Get Trends",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/dashboard/trends?period=monthly",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "trends"],
              "query": [{ "key": "period", "value": "monthly" }]
            },
            "description": "Get disbursement and collection trends"
          }
        },
        {
          "name": "Get Cash Flow",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/dashboard/cash-flow?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "cash-flow"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-12-31" }
              ]
            },
            "description": "Get cash flow analysis"
          }
        },
        {
          "name": "Get Alerts",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/dashboard/alerts",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "alerts"]
            },
            "description": "Get system alerts and notifications"
          }
        },
        {
          "name": "Get Officer Performance",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/dashboard/officer-performance",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "officer-performance"]
            },
            "description": "Get loan officer performance metrics"
          }
        },
        {
          "name": "Get Branch Comparison",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/dashboard/branch-comparison",
              "host": ["{{baseUrl}}"],
              "path": ["dashboard", "branch-comparison"]
            },
            "description": "Get branch comparison metrics"
          }
        }
      ]
    },
    {
      "name": "üìà Enhanced Reports",
      "description": "Advanced reporting and analytics endpoints",
      "item": [
        {
          "name": "Get PAR Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/enhanced-reports/par?asOfDate=2024-06-30",
              "host": ["{{baseUrl}}"],
              "path": ["enhanced-reports", "par"],
              "query": [{ "key": "asOfDate", "value": "2024-06-30" }]
            },
            "description": "Get Portfolio at Risk (PAR) report"
          }
        },
        {
          "name": "Get Aging Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/enhanced-reports/aging?asOfDate=2024-06-30",
              "host": ["{{baseUrl}}"],
              "path": ["enhanced-reports", "aging"],
              "query": [{ "key": "asOfDate", "value": "2024-06-30" }]
            },
            "description": "Get loan aging report"
          }
        },
        {
          "name": "Get Disbursement Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/enhanced-reports/disbursements?startDate=2024-01-01&endDate=2024-06-30",
              "host": ["{{baseUrl}}"],
              "path": ["enhanced-reports", "disbursements"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-06-30" }
              ]
            },
            "description": "Get disbursement report for a date range"
          }
        },
        {
          "name": "Get Collections Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/enhanced-reports/collections?startDate=2024-01-01&endDate=2024-06-30",
              "host": ["{{baseUrl}}"],
              "path": ["enhanced-reports", "collections"],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-06-30" }
              ]
            },
            "description": "Get collections report for a date range"
          }
        },
        {
          "name": "Get Portfolio Report",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/enhanced-reports/portfolio?asOfDate=2024-06-30",
              "host": ["{{baseUrl}}"],
              "path": ["enhanced-reports", "portfolio"],
              "query": [{ "key": "asOfDate", "value": "2024-06-30" }]
            },
            "description": "Get comprehensive portfolio report"
          }
        },
        {
          "name": "Export PAR to Excel",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/enhanced-reports/par/export?asOfDate=2024-06-30&format=excel",
              "host": ["{{baseUrl}}"],
              "path": ["enhanced-reports", "par", "export"],
              "query": [
                { "key": "asOfDate", "value": "2024-06-30" },
                { "key": "format", "value": "excel" }
              ]
            },
            "description": "Export PAR report to Excel"
          }
        }
      ]
    },
    {
      "name": "üè¢ Branch Management",
      "description": "Branch CRUD and management endpoints",
      "item": [
        {
          "name": "List Branches",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.branches && response.data.branches.length > 0) {",
                  "        pm.collectionVariables.set('branchId', response.data.branches[0].id);",
                  "        console.log('‚úÖ First branch ID set: ' + response.data.branches[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branches?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["branches"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "10" }
              ]
            },
            "description": "List all branches with pagination"
          }
        },
        {
          "name": "Get Branch by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branches/{{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["branches", "{{branchId}}"]
            },
            "description": "Get a specific branch by ID"
          }
        },
        {
          "name": "Create Branch",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.id) {",
                  "        pm.collectionVariables.set('branchId', response.data.id);",
                  "        console.log('‚úÖ New branch ID set: ' + response.data.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Main Branch\",\n  \"code\": \"MB001\",\n  \"address\": \"123 Main Street, Harare\",\n  \"phone\": \"+263771234567\",\n  \"email\": \"mainbranch@microfinex.com\",\n  \"managerId\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/branches",
              "host": ["{{baseUrl}}"],
              "path": ["branches"]
            },
            "description": "Create a new branch"
          }
        },
        {
          "name": "Update Branch",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Main Branch Updated\",\n  \"address\": \"456 Updated Street, Harare\",\n  \"phone\": \"+263779876543\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/branches/{{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["branches", "{{branchId}}"]
            },
            "description": "Update a branch"
          }
        },
        {
          "name": "Delete Branch",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branches/{{branchId}}",
              "host": ["{{baseUrl}}"],
              "path": ["branches", "{{branchId}}"]
            },
            "description": "Delete a branch (soft delete)"
          }
        },
        {
          "name": "Get Branch Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branches/{{branchId}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["branches", "{{branchId}}", "stats"]
            },
            "description": "Get statistics for a specific branch"
          }
        },
        {
          "name": "Get Branch Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branches/{{branchId}}/users",
              "host": ["{{baseUrl}}"],
              "path": ["branches", "{{branchId}}", "users"]
            },
            "description": "Get users assigned to a branch"
          }
        },
        {
          "name": "Get Branch Loans",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/branches/{{branchId}}/loans",
              "host": ["{{baseUrl}}"],
              "path": ["branches", "{{branchId}}", "loans"]
            },
            "description": "Get loans in a branch"
          }
        }
      ]
    },
    {
      "name": "üëî User Administration",
      "description": "Advanced user management and role assignment endpoints",
      "item": [
        {
          "name": "List System Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/user-management?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["user-management"],
              "query": [
                { "key": "page", "value": "1" },
                { "key": "limit", "value": "10" }
              ]
            },
            "description": "List all system users with pagination"
          }
        },
        {
          "name": "Get User Details",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/user-management/{{targetUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["user-management", "{{targetUserId}}"]
            },
            "description": "Get detailed user information"
          }
        },
        {
          "name": "Create System User",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@microfinex.com\",\n  \"password\": \"SecurePass123!\",\n  \"firstName\": \"New\",\n  \"lastName\": \"User\",\n  \"role\": \"LOAN_OFFICER\",\n  \"branchId\": \"{{branchId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user-management",
              "host": ["{{baseUrl}}"],
              "path": ["user-management"]
            },
            "description": "Create a new system user"
          }
        },
        {
          "name": "Update User Roles",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"MANAGER\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user-management/{{targetUserId}}/roles",
              "host": ["{{baseUrl}}"],
              "path": ["user-management", "{{targetUserId}}", "roles"]
            },
            "description": "Update user role"
          }
        },
        {
          "name": "Update User Permissions",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permissions\": [\"view_loans\", \"create_loans\", \"approve_loans\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user-management/{{targetUserId}}/permissions",
              "host": ["{{baseUrl}}"],
              "path": ["user-management", "{{targetUserId}}", "permissions"]
            },
            "description": "Update user permissions"
          }
        },
        {
          "name": "Update User Status",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/user-management/{{targetUserId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["user-management", "{{targetUserId}}", "status"]
            },
            "description": "Activate or deactivate a user"
          }
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/user-management/{{targetUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["user-management", "{{targetUserId}}"]
            },
            "description": "Delete a system user"
          }
        }
      ]
    },
    {
      "name": "üí≥ Payment Enhancements",
      "description": "Advanced payment operations including reversals and allocation strategies",
      "item": [
        {
          "name": "Reverse Payment",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Duplicate payment - entered in error\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payment-enhancements/{{paymentId}}/reverse",
              "host": ["{{baseUrl}}"],
              "path": ["payment-enhancements", "{{paymentId}}", "reverse"]
            },
            "description": "Reverse a payment with reason"
          }
        },
        {
          "name": "Calculate Payment Allocation",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"amount\": 500,\n  \"strategy\": \"PENALTY_INTEREST_PRINCIPAL\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payment-enhancements/calculate-allocation",
              "host": ["{{baseUrl}}"],
              "path": ["payment-enhancements", "calculate-allocation"]
            },
            "description": "Preview payment allocation without applying. Strategies: PENALTY_INTEREST_PRINCIPAL, PRINCIPAL_INTEREST_PENALTY, PRO_RATA, OLDEST_FIRST"
          }
        },
        {
          "name": "Get Branch Payment Summary",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payment-enhancements/branch-summary/{{branchId}}?startDate=2024-01-01&endDate=2024-06-30",
              "host": ["{{baseUrl}}"],
              "path": [
                "payment-enhancements",
                "branch-summary",
                "{{branchId}}"
              ],
              "query": [
                { "key": "startDate", "value": "2024-01-01" },
                { "key": "endDate", "value": "2024-06-30" }
              ]
            },
            "description": "Get payment summary for a branch"
          }
        },
        {
          "name": "Calculate Early Payoff",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payment-enhancements/early-payoff/{{loanId}}",
              "host": ["{{baseUrl}}"],
              "path": ["payment-enhancements", "early-payoff", "{{loanId}}"]
            },
            "description": "Calculate early payoff amount for a loan"
          }
        },
        {
          "name": "Process Payroll Deductions",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"employerId\": \"{{employerId}}\",\n  \"payrollDate\": \"2024-06-30\",\n  \"deductions\": [\n    { \"employeeId\": \"EMP001\", \"loanId\": \"{{loanId}}\", \"amount\": 200 }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/payment-enhancements/payroll-deductions",
              "host": ["{{baseUrl}}"],
              "path": ["payment-enhancements", "payroll-deductions"]
            },
            "description": "Process bulk payroll deductions for an employer"
          }
        }
      ]
    },
    {
      "name": "üìù Loan Adjustments",
      "description": "Loan adjustment endpoints including writeoffs and rescheduling",
      "item": [
        {
          "name": "Get Loan Adjustments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-adjustments/{{loanId}}",
              "host": ["{{baseUrl}}"],
              "path": ["loan-adjustments", "{{loanId}}"]
            },
            "description": "Get all adjustments for a loan"
          }
        },
        {
          "name": "Create Loan Adjustment",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"loanId\": \"{{loanId}}\",\n  \"adjustmentType\": \"INTEREST_WAIVER\",\n  \"amount\": 50,\n  \"reason\": \"Goodwill gesture for long-term client\",\n  \"effectiveDate\": \"2024-06-30\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-adjustments",
              "host": ["{{baseUrl}}"],
              "path": ["loan-adjustments"]
            },
            "description": "Create a manual loan adjustment"
          }
        },
        {
          "name": "Writeoff Loan",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Uncollectable - client deceased\",\n  \"writeoffType\": \"FULL\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-adjustments/{{loanId}}/writeoff",
              "host": ["{{baseUrl}}"],
              "path": ["loan-adjustments", "{{loanId}}", "writeoff"]
            },
            "description": "Write off a loan (full or partial)"
          }
        },
        {
          "name": "Reschedule Loan",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newTermMonths\": 12,\n  \"newInterestRate\": 15,\n  \"newStartDate\": \"2024-07-01\",\n  \"reason\": \"Client requested payment plan modification\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-adjustments/{{loanId}}/reschedule",
              "host": ["{{baseUrl}}"],
              "path": ["loan-adjustments", "{{loanId}}", "reschedule"]
            },
            "description": "Reschedule a loan with new terms"
          }
        },
        {
          "name": "Preview Writeoff",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-adjustments/{{loanId}}/writeoff/preview",
              "host": ["{{baseUrl}}"],
              "path": ["loan-adjustments", "{{loanId}}", "writeoff", "preview"]
            },
            "description": "Preview writeoff impact without applying"
          }
        },
        {
          "name": "Preview Reschedule",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"newTermMonths\": 12,\n  \"newInterestRate\": 15,\n  \"newStartDate\": \"2024-07-01\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-adjustments/{{loanId}}/reschedule/preview",
              "host": ["{{baseUrl}}"],
              "path": [
                "loan-adjustments",
                "{{loanId}}",
                "reschedule",
                "preview"
              ]
            },
            "description": "Preview new repayment schedule before applying"
          }
        }
      ]
    },
    {
      "name": "üí∞ Financial Management",
      "description": "Income, Expenses, and Payment Methods management - Track organizational cash flow",
      "item": [
        {
          "name": "Payment Methods",
          "description": "Manage payment channels (Cash, Mobile Money, Bank Transfer, etc.)",
          "item": [
            {
              "name": "List Payment Methods",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.length > 0) {",
                      "        pm.collectionVariables.set('paymentMethodId', response.data[0].id);",
                      "        console.log('‚úÖ First payment method ID set: ' + response.data[0].id);",
                      "        console.log('üí≥ Payment method name: ' + response.data[0].name);",
                      "        console.log('üí∞ Current balance: ' + response.data[0].currentBalance);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/payment-methods",
                  "host": ["{{baseUrl}}"],
                  "path": ["payment-methods"]
                },
                "description": "List all payment methods with their current balances"
              }
            },
            {
              "name": "Get Payment Method by ID",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/payment-methods/{{paymentMethodId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["payment-methods", "{{paymentMethodId}}"]
                },
                "description": "Get a specific payment method by ID"
              }
            },
            {
              "name": "Create Payment Method",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.id) {",
                      "        pm.collectionVariables.set('paymentMethodId', response.data.id);",
                      "        console.log('‚úÖ Payment method created with ID: ' + response.data.id);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Main Cash\",\n  \"code\": \"CASH-001\",\n  \"type\": \"CASH\",\n  \"description\": \"Main office cash drawer\",\n  \"currentBalance\": 5000,\n  \"currency\": \"USD\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/payment-methods",
                  "host": ["{{baseUrl}}"],
                  "path": ["payment-methods"]
                },
                "description": "Create a new payment method. Types: CASH, MOBILE_MONEY, BANK_TRANSFER, CHEQUE, CARD, CRYPTO, OTHER"
              }
            },
            {
              "name": "Update Payment Method",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Main Cash Updated\",\n  \"description\": \"Updated description\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/payment-methods/{{paymentMethodId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["payment-methods", "{{paymentMethodId}}"]
                },
                "description": "Update a payment method"
              }
            },
            {
              "name": "Adjust Balance",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"amount\": 1000,\n  \"type\": \"credit\",\n  \"reason\": \"Initial funding deposit\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/payment-methods/{{paymentMethodId}}/adjust-balance",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "payment-methods",
                    "{{paymentMethodId}}",
                    "adjust-balance"
                  ]
                },
                "description": "Manually adjust the balance of a payment method. Type can be 'credit' or 'debit'."
              }
            },
            {
              "name": "Transfer Funds",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"fromPaymentMethodId\": \"{{paymentMethodId}}\",\n  \"toPaymentMethodId\": \"<target-payment-method-id>\",\n  \"amount\": 500,\n  \"description\": \"Transfer to bank account\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/payment-methods/transfer",
                  "host": ["{{baseUrl}}"],
                  "path": ["payment-methods", "transfer"]
                },
                "description": "Transfer funds between payment methods"
              }
            },
            {
              "name": "Get Payment Method Stats",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/payment-methods/stats",
                  "host": ["{{baseUrl}}"],
                  "path": ["payment-methods", "stats"]
                },
                "description": "Get statistics for all payment methods including total balances"
              }
            },
            {
              "name": "Delete Payment Method",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/payment-methods/{{paymentMethodId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["payment-methods", "{{paymentMethodId}}"]
                },
                "description": "Delete a payment method (only if no transactions are associated)"
              }
            }
          ]
        },
        {
          "name": "Income Categories",
          "description": "Manage income category types",
          "item": [
            {
              "name": "List Income Categories",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.length > 0) {",
                      "        pm.collectionVariables.set('incomeCategoryId', response.data[0].id);",
                      "        console.log('‚úÖ First income category ID set: ' + response.data[0].id);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/income-categories",
                  "host": ["{{baseUrl}}"],
                  "path": ["income-categories"]
                },
                "description": "List all income categories"
              }
            },
            {
              "name": "Get Income Category by ID",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/income-categories/{{incomeCategoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["income-categories", "{{incomeCategoryId}}"]
                },
                "description": "Get a specific income category"
              }
            },
            {
              "name": "Create Income Category",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.id) {",
                      "        pm.collectionVariables.set('incomeCategoryId', response.data.id);",
                      "        console.log('‚úÖ Income category created with ID: ' + response.data.id);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Loan Repayments\",\n  \"description\": \"Income from loan repayments\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/income-categories",
                  "host": ["{{baseUrl}}"],
                  "path": ["income-categories"]
                },
                "description": "Create a new income category"
              }
            },
            {
              "name": "Update Income Category",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Loan Repayments Updated\",\n  \"description\": \"Updated description\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/income-categories/{{incomeCategoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["income-categories", "{{incomeCategoryId}}"]
                },
                "description": "Update an income category"
              }
            },
            {
              "name": "Delete Income Category",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/income-categories/{{incomeCategoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["income-categories", "{{incomeCategoryId}}"]
                },
                "description": "Delete an income category"
              }
            }
          ]
        },
        {
          "name": "Expense Categories",
          "description": "Manage expense category types",
          "item": [
            {
              "name": "List Expense Categories",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.length > 0) {",
                      "        pm.collectionVariables.set('expenseCategoryId', response.data[0].id);",
                      "        console.log('‚úÖ First expense category ID set: ' + response.data[0].id);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/expense-categories",
                  "host": ["{{baseUrl}}"],
                  "path": ["expense-categories"]
                },
                "description": "List all expense categories"
              }
            },
            {
              "name": "Get Expense Category by ID",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/expense-categories/{{expenseCategoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["expense-categories", "{{expenseCategoryId}}"]
                },
                "description": "Get a specific expense category"
              }
            },
            {
              "name": "Create Expense Category",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.id) {",
                      "        pm.collectionVariables.set('expenseCategoryId', response.data.id);",
                      "        console.log('‚úÖ Expense category created with ID: ' + response.data.id);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Loan Disbursements\",\n  \"description\": \"Expenses from loan disbursements\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/expense-categories",
                  "host": ["{{baseUrl}}"],
                  "path": ["expense-categories"]
                },
                "description": "Create a new expense category"
              }
            },
            {
              "name": "Update Expense Category",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"Loan Disbursements Updated\",\n  \"description\": \"Updated description\",\n  \"isActive\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/expense-categories/{{expenseCategoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["expense-categories", "{{expenseCategoryId}}"]
                },
                "description": "Update an expense category"
              }
            },
            {
              "name": "Delete Expense Category",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/expense-categories/{{expenseCategoryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["expense-categories", "{{expenseCategoryId}}"]
                },
                "description": "Delete an expense category"
              }
            }
          ]
        },
        {
          "name": "Financial Transactions",
          "description": "Record and manage income/expense transactions",
          "item": [
            {
              "name": "List Financial Transactions",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.transactions && response.data.transactions.length > 0) {",
                      "        pm.collectionVariables.set('financialTransactionId', response.data.transactions[0].id);",
                      "        console.log('‚úÖ First transaction ID set: ' + response.data.transactions[0].id);",
                      "        console.log('üìù Transaction type: ' + response.data.transactions[0].type);",
                      "        console.log('üí∞ Amount: ' + response.data.transactions[0].amount);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions?page=1&limit=20",
                  "host": ["{{baseUrl}}"],
                  "path": ["financial-transactions"],
                  "query": [
                    { "key": "page", "value": "1" },
                    { "key": "limit", "value": "20" },
                    { "key": "type", "value": "", "disabled": true },
                    { "key": "status", "value": "", "disabled": true },
                    { "key": "startDate", "value": "", "disabled": true },
                    { "key": "endDate", "value": "", "disabled": true },
                    { "key": "paymentMethodId", "value": "", "disabled": true }
                  ]
                },
                "description": "List all financial transactions with filtering options. Types: INCOME, EXPENSE. Status: PENDING, COMPLETED, VOIDED"
              }
            },
            {
              "name": "Get Financial Summary",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions/summary",
                  "host": ["{{baseUrl}}"],
                  "path": ["financial-transactions", "summary"],
                  "query": [
                    { "key": "startDate", "value": "", "disabled": true },
                    { "key": "endDate", "value": "", "disabled": true }
                  ]
                },
                "description": "Get financial summary with total income, expenses, and net balance"
              }
            },
            {
              "name": "Get Transaction by ID",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions/{{financialTransactionId}}",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "financial-transactions",
                    "{{financialTransactionId}}"
                  ]
                },
                "description": "Get a specific financial transaction by ID"
              }
            },
            {
              "name": "Create Income Transaction",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.id) {",
                      "        pm.collectionVariables.set('financialTransactionId', response.data.id);",
                      "        console.log('‚úÖ Income transaction created: ' + response.data.id);",
                      "        console.log('üìù Transaction #: ' + response.data.transactionNumber);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"type\": \"INCOME\",\n  \"amount\": 5000,\n  \"currency\": \"USD\",\n  \"description\": \"Investment from shareholder\",\n  \"transactionDate\": \"2025-12-06T10:00:00Z\",\n  \"reference\": \"INV-001\",\n  \"paymentMethodId\": \"{{paymentMethodId}}\",\n  \"incomeCategoryId\": \"{{incomeCategoryId}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions",
                  "host": ["{{baseUrl}}"],
                  "path": ["financial-transactions"]
                },
                "description": "Record a new income transaction"
              }
            },
            {
              "name": "Create Expense Transaction",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    if (response.data && response.data.id) {",
                      "        pm.collectionVariables.set('financialTransactionId', response.data.id);",
                      "        console.log('‚úÖ Expense transaction created: ' + response.data.id);",
                      "        console.log('üìù Transaction #: ' + response.data.transactionNumber);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"type\": \"EXPENSE\",\n  \"amount\": 1000,\n  \"currency\": \"USD\",\n  \"description\": \"Office rent payment\",\n  \"transactionDate\": \"2025-12-06T10:00:00Z\",\n  \"reference\": \"RENT-DEC-2025\",\n  \"paymentMethodId\": \"{{paymentMethodId}}\",\n  \"expenseCategoryId\": \"{{expenseCategoryId}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions",
                  "host": ["{{baseUrl}}"],
                  "path": ["financial-transactions"]
                },
                "description": "Record a new expense transaction"
              }
            },
            {
              "name": "Update Transaction",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"description\": \"Updated transaction description\",\n  \"reference\": \"REF-UPDATED\",\n  \"notes\": \"Added notes to transaction\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions/{{financialTransactionId}}",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "financial-transactions",
                    "{{financialTransactionId}}"
                  ]
                },
                "description": "Update a financial transaction (only description, reference, notes can be updated)"
              }
            },
            {
              "name": "Void Transaction",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Transaction entered in error\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions/{{financialTransactionId}}/void",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "financial-transactions",
                    "{{financialTransactionId}}",
                    "void"
                  ]
                },
                "description": "Void a transaction - reverses the balance changes and marks as VOIDED"
              }
            },
            {
              "name": "Get Payment Method History",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/financial-transactions/payment-method/{{paymentMethodId}}/history?page=1&limit=20",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "financial-transactions",
                    "payment-method",
                    "{{paymentMethodId}}",
                    "history"
                  ],
                  "query": [
                    { "key": "page", "value": "1" },
                    { "key": "limit", "value": "20" },
                    { "key": "startDate", "value": "", "disabled": true },
                    { "key": "endDate", "value": "", "disabled": true }
                  ]
                },
                "description": "Get transaction history for a specific payment method"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîê Security",
      "description": "Security hardening endpoints - Email verification, password policies, sessions, rate limiting, API key IP whitelisting",
      "item": [
        {
          "name": "Email Verification",
          "item": [
            {
              "name": "Send Verification Email",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/email/verify/send",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "email", "verify", "send"]
                },
                "description": "Send email verification link to authenticated user"
              }
            },
            {
              "name": "Verify Email Token",
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"token\": \"{{verificationToken}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/email/verify",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "email", "verify"]
                },
                "description": "Verify email with token from verification link"
              }
            },
            {
              "name": "Resend Verification",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/email/verify/resend",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "email", "verify", "resend"]
                },
                "description": "Resend verification email (rate limited)"
              }
            },
            {
              "name": "Get Verification Status",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/email/verify/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "email", "verify", "status"]
                },
                "description": "Get email verification status for authenticated user"
              }
            }
          ]
        },
        {
          "name": "Password Policy",
          "item": [
            {
              "name": "Get Password Policy",
              "request": {
                "auth": { "type": "noauth" },
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/password/policy?organizationId={{organizationId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "password", "policy"],
                  "query": [
                    { "key": "organizationId", "value": "{{organizationId}}" }
                  ]
                },
                "description": "Get password requirements and policy"
              }
            },
            {
              "name": "Validate Password Strength",
              "request": {
                "auth": { "type": "noauth" },
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"password\": \"SecurePassword123!\",\n  \"organizationId\": \"{{organizationId}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/password/validate",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "password", "validate"]
                },
                "description": "Validate password against policy (returns strength score)"
              }
            },
            {
              "name": "Check Password Expiration",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/password/expiration",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "password", "expiration"]
                },
                "description": "Check if password has expired or will expire soon"
              }
            },
            {
              "name": "Change Password",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"currentPassword\": \"OldPassword123!\",\n  \"newPassword\": \"NewSecurePassword456!\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/password/change",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "password", "change"]
                },
                "description": "Change password with policy validation and history check"
              }
            },
            {
              "name": "Update Password Policy (Admin)",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"policy\": {\n    \"minLength\": 10,\n    \"requireUppercase\": true,\n    \"requireLowercase\": true,\n    \"requireNumbers\": true,\n    \"requireSpecialChars\": true,\n    \"maxAgeDays\": 60,\n    \"preventReuse\": 5\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/password/policy",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "password", "policy"]
                },
                "description": "Update organization password policy (Admin only)"
              }
            }
          ]
        },
        {
          "name": "Session Management",
          "item": [
            {
              "name": "Get Active Sessions",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/sessions",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions"]
                },
                "description": "Get all active sessions for current user"
              }
            },
            {
              "name": "Get All Sessions (Admin)",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.success && response.data?.sessions?.length > 0) {",
                      "        pm.collectionVariables.set('sessionId', response.data.sessions[0].id);",
                      "        console.log('üìç Set sessionId: ' + response.data.sessions[0].id);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/sessions/all?page=1&limit=50&isActive=true",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions", "all"],
                  "query": [
                    { "key": "page", "value": "1" },
                    { "key": "limit", "value": "50" },
                    { "key": "isActive", "value": "true" },
                    {
                      "key": "organizationId",
                      "value": "{{organizationId}}",
                      "disabled": true
                    },
                    { "key": "userId", "value": "{{userId}}", "disabled": true }
                  ]
                },
                "description": "üìã **GET ALL SESSIONS** (Admin/Super Admin)\\n\\nRetrieve all active sessions across users.\\n\\n**Features:**\\n- Super Admins can see all organizations\\n- Org Admins can only see their organization\\n- Supports pagination and filtering\\n\\n**Query Parameters:**\\n- page: Page number (default: 1)\\n- limit: Items per page (default: 50)\\n- isActive: Filter by active status (true/false)\\n- organizationId: Filter by organization (Super Admin only)\\n- userId: Filter by specific user\\n\\n**Response includes:**\\n- Session details with user info\\n- Device info (type, browser, OS)\\n- IP address and timestamps\\n- Pagination metadata"
              }
            },
            {
              "name": "Get Session Statistics (Admin)",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/sessions/stats",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions", "stats"],
                  "query": [
                    {
                      "key": "organizationId",
                      "value": "{{organizationId}}",
                      "disabled": true
                    }
                  ]
                },
                "description": "üìä **GET SESSION STATISTICS** (Admin/Super Admin)\\n\\nRetrieve session statistics and metrics.\\n\\n**Response includes:**\\n- activeSessions: Count of currently active sessions\\n- totalSessions: Total sessions in database\\n- newSessionsLast24h: Sessions created in last 24 hours\\n- uniqueActiveUsers: Number of unique users with active sessions"
              }
            },
            {
              "name": "Terminate Session",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/sessions/{{sessionId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions", "{{sessionId}}"]
                },
                "description": "Terminate a specific session"
              }
            },
            {
              "name": "Logout Other Sessions",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"currentSessionId\": \"{{sessionId}}\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/sessions/logout-others",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions", "logout-others"]
                },
                "description": "Terminate all other sessions except current"
              }
            },
            {
              "name": "Logout All Sessions",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/sessions/logout-all",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions", "logout-all"]
                },
                "description": "Terminate all sessions (full logout)"
              }
            },
            {
              "name": "Force Logout User (Admin)",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Security concern - suspicious activity\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/sessions/force-logout/{{userId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions", "force-logout", "{{userId}}"]
                },
                "description": "Force logout a user from all devices (Admin only)"
              }
            },
            {
              "name": "Get Session Config",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/sessions/config",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "sessions", "config"]
                },
                "description": "Get session management configuration"
              }
            }
          ]
        },
        {
          "name": "Rate Limiting",
          "item": [
            {
              "name": "Get Rate Limit Status",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/rate-limit/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "rate-limit", "status"]
                },
                "description": "Get current rate limit status for authenticated user"
              }
            },
            {
              "name": "Get All Rate Limits (Admin)",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/rate-limit/all",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "rate-limit", "all"]
                },
                "description": "Get all rate limit entries (Admin only)"
              }
            },
            {
              "name": "Reset User Rate Limit (Admin)",
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/rate-limit/reset/{{userId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "rate-limit", "reset", "{{userId}}"]
                },
                "description": "Reset rate limit for a specific user (Admin only)"
              }
            }
          ]
        },
        {
          "name": "API Key IP Whitelist",
          "item": [
            {
              "name": "Get API Key Whitelist",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/api-keys/{{apiKeyId}}/whitelist",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "api-keys", "{{apiKeyId}}", "whitelist"]
                },
                "description": "Get all whitelisted IPs for an API key"
              }
            },
            {
              "name": "Add IP to Whitelist",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"ipAddress\": \"192.168.1.100\",\n  \"cidr\": 32,\n  \"description\": \"Office network\",\n  \"expiresAt\": \"2025-12-31T23:59:59Z\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/api-keys/{{apiKeyId}}/whitelist",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "api-keys", "{{apiKeyId}}", "whitelist"]
                },
                "description": "Add an IP address to API key whitelist"
              }
            },
            {
              "name": "Remove IP from Whitelist",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/api-keys/{{apiKeyId}}/whitelist/{{whitelistEntryId}}",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "security",
                    "api-keys",
                    "{{apiKeyId}}",
                    "whitelist",
                    "{{whitelistEntryId}}"
                  ]
                },
                "description": "Remove an IP from API key whitelist"
              }
            },
            {
              "name": "Toggle IP Whitelisting",
              "request": {
                "method": "PATCH",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"enabled\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/api-keys/{{apiKeyId}}/whitelist/toggle",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "security",
                    "api-keys",
                    "{{apiKeyId}}",
                    "whitelist",
                    "toggle"
                  ]
                },
                "description": "Enable or disable IP whitelisting for an API key"
              }
            },
            {
              "name": "Bulk Add IPs",
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"ips\": [\n    { \"ipAddress\": \"10.0.0.0\", \"cidr\": 8, \"description\": \"Internal network\" },\n    { \"ipAddress\": \"192.168.1.0\", \"cidr\": 24, \"description\": \"Office subnet\" }\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/security/api-keys/{{apiKeyId}}/whitelist/bulk",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "security",
                    "api-keys",
                    "{{apiKeyId}}",
                    "whitelist",
                    "bulk"
                  ]
                },
                "description": "Add multiple IPs to whitelist at once"
              }
            },
            {
              "name": "Clear Whitelist (Admin)",
              "request": {
                "method": "DELETE",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/api-keys/{{apiKeyId}}/whitelist",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "api-keys", "{{apiKeyId}}", "whitelist"]
                },
                "description": "Clear all whitelist entries for an API key (Admin only)"
              }
            }
          ]
        },
        {
          "name": "Security Audit",
          "item": [
            {
              "name": "Get Audit Logs",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/audit?page=1&limit=50&action=LOGIN_FAILED",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "audit"],
                  "query": [
                    { "key": "page", "value": "1" },
                    { "key": "limit", "value": "50" },
                    { "key": "action", "value": "LOGIN_FAILED" }
                  ]
                },
                "description": "Get security audit logs with filtering"
              }
            },
            {
              "name": "Get Security Events Summary",
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/security/events/summary?days=7",
                  "host": ["{{baseUrl}}"],
                  "path": ["security", "events", "summary"],
                  "query": [{ "key": "days", "value": "7" }]
                },
                "description": "Get summary of security events for the specified period"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "ü§ñ AI & Document Intelligence",
      "description": "AI provider management and document extraction using machine learning models",
      "item": [
        {
          "name": "Providers",
          "description": "Manage AI service providers",
          "item": [
            {
              "name": "Get Available Providers",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('ü§ñ Available AI Providers:');",
                      "    response.data.forEach(provider => {",
                      "        console.log('  - ' + provider.name + ' (' + provider.id + ')');",
                      "    });",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "url": {
                  "raw": "{{baseUrl}}/ai/providers",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "providers"]
                },
                "description": "üåê **GET ALL AVAILABLE AI PROVIDERS**\n\nRetrieve all available AI providers in the system (OpenAI, Anthropic, Google, etc.)\n\n**Permissions Required:** ai:view\n\n**Response includes:**\n- Provider ID and name\n- Available models\n- Supported capabilities\n- Configuration requirements"
              }
            }
          ]
        },
        {
          "name": "Configuration",
          "description": "Configure AI providers for your organization",
          "item": [
            {
              "name": "Get Organization AI Configs",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('‚öôÔ∏è Organization AI Configurations:');",
                      "    response.data.forEach(config => {",
                      "        console.log('  - ' + config.aiProvider.name + ' (Primary: ' + config.isPrimary + ')');",
                      "    });",
                      "    if (response.data.length > 0) {",
                      "        pm.collectionVariables.set('aiConfigId', response.data[0].id);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "url": {
                  "raw": "{{baseUrl}}/ai/configs",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "configs"]
                },
                "description": "üìã **GET ORGANIZATION AI CONFIGURATIONS**\n\nRetrieve all AI provider configurations for your organization.\n\n**Permissions Required:** ai:view\n\n**Response includes:**\n- Configuration ID\n- Provider details\n- Model settings\n- Primary provider flag\n- Enabled status"
              }
            },
            {
              "name": "Configure AI Provider",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('aiConfigId', response.data.id);",
                      "    console.log('‚úÖ AI Provider configured successfully');",
                      "    console.log('üîë Config ID: ' + response.data.id);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"aiProviderId\": \"550e8400-e29b-41d4-a716-446655440001\",\n  \"apiKey\": \"sk-...\",\n  \"modelName\": \"gpt-4\",\n  \"isEnabled\": true,\n  \"isPrimary\": true,\n  \"maxTokens\": 4096,\n  \"temperature\": 0.7,\n  \"settings\": {}\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/ai/configs",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "configs"]
                },
                "description": "‚öôÔ∏è **CONFIGURE AI PROVIDER FOR ORGANIZATION**\n\nAdd or update an AI provider configuration for your organization.\n\n**Permissions Required:** ai:manage\n\n**Parameters:**\n- aiProviderId: UUID of the AI provider (required)\n- apiKey: API key for authentication (optional)\n- modelName: Specific model to use (optional)\n- isEnabled: Enable/disable this configuration (optional)\n- isPrimary: Set as primary provider (optional)\n- maxTokens: Maximum tokens per request (optional)\n- temperature: Response temperature/creativity (0-2, optional)\n- settings: Additional provider-specific settings (optional)"
              }
            },
            {
              "name": "Update AI Config",
              "request": {
                "method": "PUT",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"apiKey\": \"sk-...\",\n  \"modelName\": \"gpt-4-turbo\",\n  \"isEnabled\": true,\n  \"isPrimary\": true,\n  \"maxTokens\": 8192,\n  \"temperature\": 0.5,\n  \"settings\": {}\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/ai/configs/{{aiConfigId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "configs", "{{aiConfigId}}"]
                },
                "description": "‚úèÔ∏è **UPDATE AI PROVIDER CONFIGURATION**\n\nUpdate settings for an existing AI provider configuration.\n\n**Permissions Required:** ai:manage\n\n**URL Parameters:**\n- aiConfigId: Configuration UUID (required)\n\n**Body Parameters:** All optional\n- apiKey: Updated API key\n- modelName: Updated model name\n- isEnabled: Enable/disable status\n- isPrimary: Primary provider flag\n- maxTokens: Maximum tokens\n- temperature: Response temperature\n- settings: Additional settings"
              }
            },
            {
              "name": "Test Connection",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    if (response.data.success) {",
                      "        console.log('‚úÖ AI Provider connection test successful');",
                      "        console.log('‚è±Ô∏è Response time: ' + response.data.responseTime + 'ms');",
                      "    } else {",
                      "        console.log('‚ùå Connection test failed: ' + response.data.error);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "url": {
                  "raw": "{{baseUrl}}/ai/configs/{{aiConfigId}}/test",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "configs", "{{aiConfigId}}", "test"]
                },
                "description": "üß™ **TEST AI PROVIDER CONNECTION**\n\nVerify that the AI provider is properly configured and accessible.\n\n**Permissions Required:** ai:manage\n\n**URL Parameters:**\n- aiConfigId: Configuration UUID (required)\n\n**Response includes:**\n- Connection status\n- Response time\n- Error details if connection fails"
              }
            },
            {
              "name": "Delete AI Config",
              "request": {
                "method": "DELETE",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "url": {
                  "raw": "{{baseUrl}}/ai/configs/{{aiConfigId}}",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "configs", "{{aiConfigId}}"]
                },
                "description": "üóëÔ∏è **DELETE AI PROVIDER CONFIGURATION**\n\nRemove an AI provider configuration from your organization.\n\n**Permissions Required:** ai:manage\n\n**URL Parameters:**\n- aiConfigId: Configuration UUID (required)\n\n**Note:** Deleting a configuration will disable any AI features that depend on it."
              }
            }
          ]
        },
        {
          "name": "Document Extraction",
          "description": "Extract data from documents using AI",
          "item": [
            {
              "name": "Extract from Document",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üìÑ Document Extraction Results:');",
                      "    console.log('  Document Type: ' + response.data.documentType);",
                      "    console.log('  Confidence: ' + (response.data.confidence * 100).toFixed(2) + '%');",
                      "    console.log('  Extracted Fields: ' + Object.keys(response.data.extractedData).length);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" },
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"documentType\": \"national_id\",\n  \"imageBase64\": \"iVBORw0KGgoAAAANSUhEUgAAA...\",\n  \"mimeType\": \"image/png\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/ai/extract",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "extract"]
                },
                "description": "üìã **EXTRACT DATA FROM DOCUMENT USING AI**\n\nUse AI to extract structured data from documents (IDs, receipts, invoices, etc.)\n\n**Permissions Required:** ai:extract\n\n**Parameters:**\n- documentType: Type of document (national_id, passport, invoice, receipt, etc.) - required\n- imageBase64: Base64 encoded image data (optional if pdfUrl provided)\n- pdfUrl: URL to PDF document (optional if imageBase64 provided)\n- mimeType: MIME type of the image (image/png, image/jpeg, etc.)\n\n**Response includes:**\n- Extracted fields and values\n- Confidence scores\n- Document validation status\n- Recommended actions"
              }
            }
          ]
        },
        {
          "name": "Usage & Analytics",
          "description": "Monitor AI usage and costs",
          "item": [
            {
              "name": "Get AI Usage Statistics",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üìä AI Usage Statistics:');",
                      "    console.log('  Total Requests: ' + response.data.totalRequests);",
                      "    console.log('  Total Tokens Used: ' + response.data.totalTokensUsed);",
                      "    console.log('  Estimated Cost: $' + response.data.estimatedCost.toFixed(2));",
                      "    console.log('  Active Providers: ' + response.data.activeProviders);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  { "key": "Authorization", "value": "Bearer {{authToken}}" }
                ],
                "url": {
                  "raw": "{{baseUrl}}/ai/usage",
                  "host": ["{{baseUrl}}"],
                  "path": ["ai", "usage"]
                },
                "description": "üìà **GET AI USAGE STATISTICS**\n\nView usage metrics and costs for AI services.\n\n**Permissions Required:** ai:view\n\n**Response includes:**\n- Total API requests made\n- Token usage by provider\n- Estimated costs\n- Usage trends\n- Most used providers"
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üîê Data Encryption",
      "description": "Data-at-rest encryption management endpoints (Super Admin only). Manage encryption keys, verify encrypted data, and perform bulk encryption operations.",
      "item": [
        {
          "name": "Status & Monitoring",
          "description": "Monitor encryption service status and key health",
          "item": [
            {
              "name": "Get Encryption Status",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "pm.test('Encryption status retrieved', function () {",
                      "    const jsonData = pm.response.json();",
                      "    pm.expect(jsonData.success).to.be.true;",
                      "    pm.expect(jsonData.data).to.have.property('service');",
                      "    pm.expect(jsonData.data).to.have.property('keys');",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîê Encryption Service Status');",
                      "    console.log('‚úÖ Enabled: ' + response.data.service.enabled);",
                      "    console.log('üîë Algorithm: ' + response.data.service.algorithm);",
                      "    console.log('üìä Total Keys: ' + response.data.keys.total);",
                      "    console.log('‚úÖ Active Keys: ' + response.data.keys.active);",
                      "    if (response.data.alerts && response.data.alerts.length > 0) {",
                      "        console.log('‚ö†Ô∏è Alerts: ' + response.data.alerts.join(', '));",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/encryption/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "status"]
                },
                "description": "Get encryption service status including key statistics and expiring keys. Shows alerts for keys expiring within 30 days."
              }
            },
            {
              "name": "Get Encryption Audit Logs",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üìã Encryption Audit Logs');",
                      "    console.log('üìä Total entries: ' + response.data.pagination.total);",
                      "    if (response.data.logs && response.data.logs.length > 0) {",
                      "        console.log('üìù Latest action: ' + response.data.logs[0].action);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/encryption/audit?limit=50&offset=0",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "audit"],
                  "query": [
                    { "key": "limit", "value": "50" },
                    { "key": "offset", "value": "0" }
                  ]
                },
                "description": "Get encryption-related audit logs including key generation, rotation, and revocation events."
              }
            }
          ]
        },
        {
          "name": "Key Management",
          "description": "Generate, rotate, and manage encryption keys",
          "item": [
            {
              "name": "List Encryption Keys",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîë Encryption Keys');",
                      "    console.log('üìä Total keys: ' + response.data.length);",
                      "    if (response.data.length > 0) {",
                      "        pm.collectionVariables.set('encryptionKeyId', response.data[0].id);",
                      "        console.log('‚úÖ First key ID saved: ' + response.data[0].id);",
                      "        console.log('üîê Key type: ' + response.data[0].keyType);",
                      "        console.log('üìÖ Expires: ' + response.data[0].expiresAt);",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/encryption/keys",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "keys"],
                  "query": [
                    {
                      "key": "organizationId",
                      "value": "{{organizationId}}",
                      "disabled": true
                    }
                  ]
                },
                "description": "List all encryption keys. Enable organizationId query param to filter by organization."
              }
            },
            {
              "name": "Generate New Key",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 201', function () {",
                      "    pm.response.to.have.status(201);",
                      "});",
                      "",
                      "if (pm.response.code === 201) {",
                      "    const response = pm.response.json();",
                      "    pm.collectionVariables.set('encryptionKeyId', response.data.id);",
                      "    console.log('‚úÖ New encryption key generated');",
                      "    console.log('üÜî Key ID: ' + response.data.id);",
                      "    console.log('üìä Version: ' + response.data.version);",
                      "    console.log('üìÖ Expires: ' + response.data.expiresAt);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"keyType\": \"DATA\",\n  \"expiryDays\": 365,\n  \"metadata\": {\n    \"purpose\": \"Client PII encryption\"\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/encryption/keys/generate",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "keys", "generate"]
                },
                "description": "Generate a new encryption key. Key types: DATA (default), MASTER, BACKUP. Optional organizationId for org-specific keys."
              }
            },
            {
              "name": "Rotate Keys",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîÑ Key rotation initiated');",
                      "    console.log('üìã ' + response.message);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Scheduled quarterly rotation\",\n  \"reEncryptData\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/encryption/keys/rotate",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "keys", "rotate"]
                },
                "description": "Rotate encryption keys and optionally re-encrypt all data. Set reEncryptData to false to skip re-encryption (not recommended)."
              }
            },
            {
              "name": "Get Rotation Status",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîÑ Rotation Status');",
                      "    console.log('üìä In Progress: ' + response.data.inProgress);",
                      "    if (response.data.progress) {",
                      "        console.log('üìà Progress: ' + response.data.progress + '%');",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/encryption/keys/rotation-status",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "keys", "rotation-status"],
                  "query": [
                    {
                      "key": "organizationId",
                      "value": "{{organizationId}}",
                      "disabled": true
                    }
                  ]
                },
                "description": "Check the status of an ongoing key rotation and data re-encryption operation."
              }
            },
            {
              "name": "Verify Key Integrity",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîç Key Integrity Check');",
                      "    console.log('‚úÖ Valid: ' + response.success);",
                      "    if (response.data.issues) {",
                      "        console.log('‚ö†Ô∏è Issues: ' + response.data.issues.join(', '));",
                      "    }",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/encryption/keys/{{encryptionKeyId}}/verify",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "encryption",
                    "keys",
                    "{{encryptionKeyId}}",
                    "verify"
                  ]
                },
                "description": "Verify the integrity of a specific encryption key. Checks for corruption or tampering."
              }
            },
            {
              "name": "Revoke Key",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üö´ Key Revoked');",
                      "    console.log('‚ö†Ô∏è ' + response.warning);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"reason\": \"Key compromised - security incident\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/encryption/keys/{{encryptionKeyId}}/revoke",
                  "host": ["{{baseUrl}}"],
                  "path": [
                    "encryption",
                    "keys",
                    "{{encryptionKeyId}}",
                    "revoke"
                  ]
                },
                "description": "‚ö†Ô∏è DANGER: Revoke a compromised encryption key. Data encrypted with this key may become inaccessible. Use only in security emergencies."
              }
            }
          ]
        },
        {
          "name": "Field Configuration",
          "description": "View encrypted field configurations",
          "item": [
            {
              "name": "List Encrypted Fields",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîê Encrypted Field Configuration');",
                      "    console.log('üìä Total fields: ' + response.data.summary.totalFields);",
                      "    console.log('üîç Searchable fields: ' + response.data.summary.searchableFields);",
                      "    console.log('');",
                      "    console.log('By Sensitivity Level:');",
                      "    console.log('  üü¢ LOW: ' + response.data.summary.byLevel.LOW);",
                      "    console.log('  üü° MEDIUM: ' + response.data.summary.byLevel.MEDIUM);",
                      "    console.log('  üü† HIGH: ' + response.data.summary.byLevel.HIGH);",
                      "    console.log('  üî¥ CRITICAL: ' + response.data.summary.byLevel.CRITICAL);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/encryption/fields",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "fields"]
                },
                "description": "List all encrypted field configurations grouped by table. Shows sensitivity levels and which fields support deterministic encryption for searching."
              }
            }
          ]
        },
        {
          "name": "Table Operations",
          "description": "Verify and encrypt table data",
          "item": [
            {
              "name": "Verify Table Encryption",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîç Table Encryption Verification');",
                      "    console.log('üìã Table: ' + response.data.table);",
                      "    console.log('üìä Total Records: ' + response.data.totalRecords);",
                      "    console.log('üîê Encrypted: ' + response.data.encryptedRecords);",
                      "    console.log('üìà Percentage: ' + response.data.encryptionPercentage + '%');",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/encryption/tables/clients/verify",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "tables", "clients", "verify"]
                },
                "description": "Verify encryption status of a table. Valid tables: clients, client_bank_accounts, guarantors, collaterals, users, api_keys, client_documents"
              }
            },
            {
              "name": "Bulk Encrypt Table",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üîê Bulk Encryption Result');",
                      "    console.log('üìä Processed: ' + response.data.processed);",
                      "    console.log('‚úÖ Encrypted: ' + response.data.encrypted);",
                      "    console.log('‚ùå Failed: ' + response.data.failed);",
                      "    console.log('‚è±Ô∏è Duration: ' + response.data.duration + 'ms');",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"batchSize\": 100,\n  \"dryRun\": true\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/encryption/tables/clients/encrypt",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "tables", "clients", "encrypt"]
                },
                "description": "Bulk encrypt unencrypted data in a table. Set dryRun: true to preview without making changes. Valid tables: clients, client_bank_accounts, guarantors, collaterals, users, api_keys, client_documents"
              }
            }
          ]
        },
        {
          "name": "Backup & Recovery",
          "description": "Export and import encryption keys",
          "item": [
            {
              "name": "Export Key Backup",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    console.log('‚úÖ Encryption key backup generated');",
                      "    console.log('‚ö†Ô∏è Store this backup securely!');",
                      "    console.log('üîê Backup is encrypted with your master password');",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"masterPassword\": \"YourSecureMasterPassword16+\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/encryption/backup",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "backup"]
                },
                "description": "Export an encrypted backup of all encryption keys. Master password must be at least 16 characters. Store the backup and password separately and securely."
              }
            },
            {
              "name": "Import Key Backup",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('‚úÖ Keys restored successfully');",
                      "    console.log('üîë Imported: ' + response.data.importedCount + ' keys');",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"backup\": \"<encrypted backup data from export>\",\n  \"masterPassword\": \"YourSecureMasterPassword16+\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/encryption/restore",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "restore"]
                },
                "description": "Restore encryption keys from a backup. Requires the same master password used during export."
              }
            }
          ]
        },
        {
          "name": "Testing",
          "description": "Test encryption functionality",
          "item": [
            {
              "name": "Test Encryption",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "type": "text/javascript",
                    "exec": [
                      "pm.test('Status code is 200', function () {",
                      "    pm.response.to.have.status(200);",
                      "});",
                      "",
                      "if (pm.response.code === 200) {",
                      "    const response = pm.response.json();",
                      "    console.log('üß™ Encryption Test Results');",
                      "    console.log('');",
                      "    console.log('Standard Encryption:');",
                      "    console.log('  ‚úÖ Encrypt/Decrypt: ' + response.data.standard.matches);",
                      "    console.log('');",
                      "    console.log('Deterministic Encryption:');",
                      "    console.log('  ‚úÖ Encrypt/Decrypt: ' + response.data.deterministic.matches);",
                      "    console.log('  üîç Is Deterministic: ' + response.data.deterministic.isDeterministic);",
                      "    console.log('');",
                      "    console.log('Data Masking:');",
                      "    console.log('  Default: ' + response.data.masking.default);",
                      "    console.log('  Middle: ' + response.data.masking.middle);",
                      "}"
                    ]
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  { "key": "Content-Type", "value": "application/json" }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"plaintext\": \"SensitiveData123\"\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/encryption/test",
                  "host": ["{{baseUrl}}"],
                  "path": ["encryption", "test"]
                },
                "description": "Test encryption and decryption with sample data. Tests both standard (random IV) and deterministic encryption, plus data masking."
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üí± Currencies",
      "description": "Currency management for multi-currency support (Super Admin)",
      "item": [
        {
          "name": "Get All Currencies",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üí± Currencies: ' + (response.data?.currencies?.length || 0));",
                  "    if (response.data?.currencies?.length > 0) {",
                  "        pm.collectionVariables.set('currencyId', response.data.currencies[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies?isActive=true",
              "host": ["{{baseUrl}}"],
              "path": ["currencies"],
              "query": [
                { "key": "isActive", "value": "true" },
                { "key": "search", "value": "", "disabled": true }
              ]
            },
            "description": "Get all currencies. Filter by isActive or search."
          }
        },
        {
          "name": "Get Active Currencies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies/active",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "active"]
            },
            "description": "Get only active currencies."
          }
        },
        {
          "name": "Get Default Currency",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies/default",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "default"]
            },
            "description": "Get the default currency for the organization."
          }
        },
        {
          "name": "Get Currency by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies/{{currencyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "{{currencyId}}"]
            },
            "description": "Get a specific currency by ID."
          }
        },
        {
          "name": "Seed Default Currencies",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 201', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
                  "});",
                  "",
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    console.log('‚úÖ Default currencies seeded');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies/seed",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "seed"]
            },
            "description": "Seed default currencies (USD, ZWG, ZAR, etc.)"
          }
        },
        {
          "name": "Create Currency",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data?.currency?.id) {",
                  "        pm.collectionVariables.set('currencyId', response.data.currency.id);",
                  "        console.log('üìå Created currency: ' + response.data.currency.code);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"code\": \"EUR\",\n  \"name\": \"Euro\",\n  \"symbol\": \"‚Ç¨\",\n  \"position\": \"before\",\n  \"decimalPlaces\": 2,\n  \"isActive\": true,\n  \"isDefault\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/currencies",
              "host": ["{{baseUrl}}"],
              "path": ["currencies"]
            },
            "description": "Create a new currency (Super Admin only)."
          }
        },
        {
          "name": "Update Currency",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Name\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/currencies/{{currencyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "{{currencyId}}"]
            },
            "description": "Update currency details (Super Admin only)."
          }
        },
        {
          "name": "Delete Currency",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies/{{currencyId}}",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "{{currencyId}}"]
            },
            "description": "Delete a currency (Super Admin only). Cannot delete currencies in use."
          }
        },
        {
          "name": "Set Default Currency",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies/{{currencyId}}/set-default",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "{{currencyId}}", "set-default"]
            },
            "description": "Set a currency as the default (Super Admin only)."
          }
        },
        {
          "name": "Toggle Currency Status",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/currencies/{{currencyId}}/toggle-status",
              "host": ["{{baseUrl}}"],
              "path": ["currencies", "{{currencyId}}", "toggle-status"]
            },
            "description": "Toggle a currency's active status (Super Admin only)."
          }
        }
      ]
    },
    {
      "name": "üí∞ Charges",
      "description": "Manage loan charges, fees, and penalties",
      "item": [
        {
          "name": "Get All Charges",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üí∞ Charges: ' + (response.data?.charges?.length || 0));",
                  "    if (response.data?.charges?.length > 0) {",
                  "        pm.collectionVariables.set('chargeId', response.data.charges[0].id);",
                  "        console.log('üìå Set chargeId: ' + response.data.charges[0].id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/charges?isActive=true",
              "host": ["{{baseUrl}}"],
              "path": ["charges"],
              "query": [
                { "key": "isActive", "value": "true" },
                { "key": "type", "value": "", "disabled": true },
                { "key": "appliesAt", "value": "", "disabled": true }
              ]
            },
            "description": "Get all charges for the organization. Filter by type, appliesAt, or isActive status."
          }
        },
        {
          "name": "Get Disbursement Charges",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/charges/disbursement?productId={{productId}}",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "disbursement"],
              "query": [
                {
                  "key": "productId",
                  "value": "{{productId}}",
                  "description": "Optional: filter by product"
                }
              ]
            },
            "description": "Get charges that apply at disbursement time."
          }
        },
        {
          "name": "Get Charge by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/charges/{{chargeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "{{chargeId}}"]
            },
            "description": "Get a specific charge by its ID."
          }
        },
        {
          "name": "Seed Default Charges",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚úÖ Seeded: ' + (response.data?.charges?.length || 0) + ' charges');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/charges/seed",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "seed"]
            },
            "description": "Seed default system charges for the organization (Admin Fee, Processing Fee, etc.)"
          }
        },
        {
          "name": "Create Charge",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data?.charge?.id) {",
                  "        pm.collectionVariables.set('chargeId', response.data.charge.id);",
                  "        console.log('üìå Created charge: ' + response.data.charge.id);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Custom Fee\",\n  \"code\": \"CUSTOM_FEE\",\n  \"type\": \"SERVICE_FEE\",\n  \"calculationType\": \"PERCENTAGE\",\n  \"defaultPercentage\": 0.02,\n  \"appliesAt\": \"DISBURSEMENT\",\n  \"isDeductedFromPrincipal\": false,\n  \"isMandatory\": false,\n  \"description\": \"Custom service fee\",\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/charges",
              "host": ["{{baseUrl}}"],
              "path": ["charges"]
            },
            "description": "Create a new charge. Types: ADMIN_FEE, APPLICATION_FEE, PROCESSING_FEE, SERVICE_FEE, LEGAL_FEE, DOCUMENTATION_FEE, INSURANCE_FEE, STAMP_DUTY, LATE_FEE, PENALTY, EARLY_SETTLEMENT_FEE, COLLECTION_FEE, RESTRUCTURE_FEE, OTHER"
          }
        },
        {
          "name": "Update Charge",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Fee Name\",\n  \"defaultPercentage\": 0.03,\n  \"isActive\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/charges/{{chargeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "{{chargeId}}"]
            },
            "description": "Update an existing charge."
          }
        },
        {
          "name": "Delete Charge",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/charges/{{chargeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "{{chargeId}}"]
            },
            "description": "Delete a charge. Cannot delete charges that have been applied to loans."
          }
        },
        {
          "name": "Preview Loan Charges",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üìã Charge Preview:');",
                  "    if (response.data?.charges) {",
                  "        response.data.charges.forEach(c => {",
                  "            console.log('  ' + c.name + ': $' + c.amount);",
                  "        });",
                  "        console.log('  Total: $' + response.data.total);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/charges/loans/{{loanId}}/preview",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "loans", "{{loanId}}", "preview"]
            },
            "description": "Preview charges that would be applied to a loan at disbursement."
          }
        },
        {
          "name": "Get Loan Charges",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üìã Applied Charges: ' + (response.data?.charges?.length || 0));",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/charges/loans/{{loanId}}",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "loans", "{{loanId}}"]
            },
            "description": "Get all charges applied to a specific loan."
          }
        },
        {
          "name": "Apply Charge to Loan",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "if (pm.response.code === 201) {",
                  "    console.log('‚úÖ Charge applied successfully');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"chargeId\": \"{{chargeId}}\",\n  \"amount\": 50,\n  \"notes\": \"Manual charge application\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/charges/loans/{{loanId}}/apply",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "loans", "{{loanId}}", "apply"]
            },
            "description": "Manually apply a charge to a loan."
          }
        },
        {
          "name": "Apply Disbursement Charges",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"chargeIds\": [\"{{chargeId}}\"],\n  \"paymentMethodId\": \"{{paymentMethodId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/charges/loans/{{loanId}}/apply-disbursement",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "loans", "{{loanId}}", "apply-disbursement"]
            },
            "description": "Apply disbursement charges to a loan."
          }
        },
        {
          "name": "Assign Charges to Product",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"chargeIds\": [\"{{chargeId}}\"],\n  \"isMandatory\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/charges/products/{{productId}}/assign",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "products", "{{productId}}", "assign"]
            },
            "description": "Assign charges to a loan product."
          }
        },
        {
          "name": "Unassign Charges from Product",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"chargeIds\": [\"{{chargeId}}\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/charges/products/{{productId}}/unassign",
              "host": ["{{baseUrl}}"],
              "path": ["charges", "products", "{{productId}}", "unassign"]
            },
            "description": "Remove charges from a loan product."
          }
        }
      ]
    },
    {
      "name": "‚öôÔ∏è Organization Settings",
      "description": "Manage organization-specific settings including loan engine configuration",
      "item": [
        {
          "name": "Get All Settings",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üìã Organization Settings:');",
                  "    if (response.data && response.data.settings) {",
                  "        Object.entries(response.data.settings).forEach(([key, value]) => {",
                  "            console.log('  ' + key + ': ' + JSON.stringify(value));",
                  "        });",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/settings",
              "host": ["{{baseUrl}}"],
              "path": ["settings"]
            },
            "description": "Get all settings for the authenticated user's organization. Returns a merged object of system defaults and organization-specific overrides."
          }
        },
        {
          "name": "Get Setting by Key",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/settings/loan_engine_type",
              "host": ["{{baseUrl}}"],
              "path": ["settings", "loan_engine_type"]
            },
            "description": "Get a single setting value by its key. Common keys: loan_engine_type, loan_approval_required, loan_auto_process_enabled, loan_default_grace_period_days"
          }
        },
        {
          "name": "Update Setting",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    console.log('‚úÖ Setting updated successfully');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settingValue\": \"SHORT_TERM\",\n  \"description\": \"Loan calculation engine type\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/settings/loan_engine_type",
              "host": ["{{baseUrl}}"],
              "path": ["settings", "loan_engine_type"]
            },
            "description": "Update a setting for the organization. Requires ADMIN or SUPER_ADMIN role."
          }
        },
        {
          "name": "Update Loan Engine Type",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settingValue\": \"SHORT_TERM\",\n  \"description\": \"Calculation method: SHORT_TERM, LONG_TERM, REDUCING_BALANCE, FLAT_RATE, CUSTOM\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/settings/loan_engine_type",
              "host": ["{{baseUrl}}"],
              "path": ["settings", "loan_engine_type"]
            },
            "description": "Set the loan calculation engine type for the organization."
          }
        },
        {
          "name": "Update Grace Period Days",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settingValue\": 7,\n  \"description\": \"Default number of days before loan is considered overdue\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/settings/loan_default_grace_period_days",
              "host": ["{{baseUrl}}"],
              "path": ["settings", "loan_default_grace_period_days"]
            },
            "description": "Set the default grace period for loans."
          }
        },
        {
          "name": "Update Loan Approval Required",
          "request": {
            "method": "PUT",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settingValue\": true,\n  \"description\": \"Whether loans require approval before disbursement\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/settings/loan_approval_required",
              "host": ["{{baseUrl}}"],
              "path": ["settings", "loan_approval_required"]
            },
            "description": "Toggle whether loans require approval before disbursement."
          }
        },
        {
          "name": "Reset Setting to Default",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/settings/reset/loan_engine_type",
              "host": ["{{baseUrl}}"],
              "path": ["settings", "reset", "loan_engine_type"]
            },
            "description": "Reset a setting to its system default value by deleting the organization override."
          }
        }
      ]
    },
    {
      "name": "üîß Loan Engine",
      "description": "Loan calculation engine for automatic interest calculation, due date management, and status updates",
      "item": [
        {
          "name": "Get Engine Settings",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚öôÔ∏è Loan Engine Settings:');",
                  "    if (response.data) {",
                  "        console.log('  Engine Type: ' + response.data.loan_engine_type);",
                  "        console.log('  Approval Required: ' + response.data.loan_approval_required);",
                  "        console.log('  Auto Process: ' + response.data.loan_auto_process_enabled);",
                  "        console.log('  Grace Period Days: ' + response.data.loan_default_grace_period_days);",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-engine/settings",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "settings"]
            },
            "description": "Get the loan engine settings configured for the organization."
          }
        },
        {
          "name": "Get Engine Statistics",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üìä Loan Engine Statistics:');",
                  "    if (response.data) {",
                  "        console.log('  Total Loans: ' + (response.data.totalLoans || 0));",
                  "        console.log('  Active Loans: ' + (response.data.activeLoans || 0));",
                  "        console.log('  Overdue Loans: ' + (response.data.overdueLoans || 0));",
                  "        console.log('  Pending Processing: ' + (response.data.pendingProcessing || 0));",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-engine/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "statistics"]
            },
            "description": "Get statistics about loans in the system for the organization."
          }
        },
        {
          "name": "Get Pending Loans",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚è≥ Pending Loans: ' + (response.data?.count || 0));",
                  "    if (response.data?.loans?.length > 0) {",
                  "        response.data.loans.forEach((loan, i) => {",
                  "            console.log('  ' + (i+1) + '. ' + loan.loanNumber + ' - ' + loan.client + ' ($' + loan.outstandingBalance + ')');",
                  "        });",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-engine/pending",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "pending"]
            },
            "description": "Get all loans that are pending processing (need status update based on due dates)."
          }
        },
        {
          "name": "Get Overdue Loans",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üö® Overdue Loans: ' + (response.data?.count || 0));",
                  "    if (response.data?.loans?.length > 0) {",
                  "        response.data.loans.forEach((loan, i) => {",
                  "            console.log('  ' + (i+1) + '. ' + loan.loanNumber + ' - ' + loan.client);",
                  "            console.log('     Days Overdue: ' + loan.daysOverdue + ', Balance: $' + loan.outstandingBalance);",
                  "        });",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-engine/overdue",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "overdue"]
            },
            "description": "Get all loans that are currently overdue (past due date + grace period)."
          }
        },
        {
          "name": "Run Engine (Dry Run)",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üîç Dry Run Results:');",
                  "    console.log('  Loans to Process: ' + (response.data?.loansToProcess || 0));",
                  "    if (response.data?.loans?.length > 0) {",
                  "        response.data.loans.forEach((loan, i) => {",
                  "            console.log('  ' + (i+1) + '. ' + loan.loanNumber + ' (' + loan.status + ')');",
                  "        });",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-engine/run",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "run"]
            },
            "description": "Preview which loans would be processed by the engine without making any changes."
          }
        },
        {
          "name": "Run Engine",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('‚úÖ Engine Run Complete:');",
                  "    console.log('  Processed: ' + (response.data?.processedCount || 0) + ' loans');",
                  "    console.log('  Updated: ' + (response.data?.updatedCount || 0) + ' statuses');",
                  "    console.log('  Errors: ' + (response.data?.errors?.length || 0));",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"dryRun\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-engine/run",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "run"]
            },
            "description": "Run the loan engine to process all eligible loans. Updates loan statuses based on due dates and grace periods."
          }
        },
        {
          "name": "Disburse Loan via Engine",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üíµ Loan Disbursed:');",
                  "    if (response.data?.loan) {",
                  "        const loan = response.data.loan;",
                  "        console.log('  Loan Number: ' + loan.loanNumber);",
                  "        console.log('  Amount: $' + loan.amount);",
                  "        console.log('  Interest: $' + loan.interestAmount);",
                  "        console.log('  Total: $' + loan.totalAmount);",
                  "        console.log('  Start Date: ' + loan.startDate);",
                  "        console.log('  Due Date: ' + loan.expectedRepaymentDate);",
                  "        console.log('  Grace Period: ' + loan.gracePeriodDays + ' days');",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"paymentMethodId\": \"{{paymentMethodId}}\",\n  \"notes\": \"Disbursed via loan engine\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/loan-engine/loans/{{loanId}}/disburse",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "loans", "{{loanId}}", "disburse"]
            },
            "description": "Disburse a loan using the loan engine. Calculates interest, sets due dates, and applies charges automatically."
          }
        },
        {
          "name": "Get Loan Balance",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    console.log('üí∞ Loan Balance: $' + response.data?.balance);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/loan-engine/loans/{{loanId}}/balance",
              "host": ["{{baseUrl}}"],
              "path": ["loan-engine", "loans", "{{loanId}}", "balance"]
            },
            "description": "Calculate and return the current balance for a loan including all payments and charges."
          }
        }
      ]
    }
  ]
}
